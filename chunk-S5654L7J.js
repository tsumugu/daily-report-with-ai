import{a as T}from"./chunk-5LZP7W4Q.js";import{a as $}from"./chunk-BCZMHKAQ.js";import{a as L}from"./chunk-IDH2I7ZG.js";import"./chunk-NAOTXHQH.js";import"./chunk-4JFTRTP5.js";import{n as F,o as z,q as A,y as I}from"./chunk-YHDQOJME.js";import{d as E,e as k,q as B,s as R,t as w}from"./chunk-HCRNHK5J.js";import{$ as v,Ba as i,Ka as S,Pa as g,S as C,Wa as m,_ as x,_a as d,ab as f,bb as b,cb as r,db as o,eb as p,fb as h,ib as _,jb as c,na as y,pb as a,qb as u,rb as P,vb as M,wb as O}from"./chunk-TUMKYTCV.js";import"./chunk-4CLCTAJ7.js";var D=(t,n)=>n.id;function H(t,n){if(t&1&&(r(0,"span",6),a(1),o()),t&2){let e,l=c();i(),u((e=l.currentUser())==null?null:e.email)}}function N(t,n){t&1&&(r(0,"div",12),p(1,"div",15),r(2,"p"),a(3,"\u8AAD\u307F\u8FBC\u307F\u4E2D..."),o()())}function U(t,n){if(t&1){let e=h();r(0,"div",13),p(1,"app-alert-banner",16),r(2,"div",17)(3,"app-button",18),_("clicked",function(){x(e);let s=c();return v(s.goBack())}),a(4,"\u4E00\u89A7\u306B\u623B\u308B"),o(),r(5,"app-button",19),_("clicked",function(){x(e);let s=c();return v(s.retry())}),a(6,"\u518D\u8AAD\u307F\u8FBC\u307F"),o()()()}if(t&2){let e=c();i(),m("message",e.errorMessage())}}function W(t,n){if(t&1&&p(0,"app-goal-chip",33),t&2){let e=n.$implicit;m("goalId",e.id)("goalName",e.name)}}function Y(t,n){if(t&1&&(r(0,"section",25)(1,"h2",27),a(2,"\u95A2\u9023\u3059\u308B\u76EE\u6A19"),o(),r(3,"div",32),f(4,W,1,2,"app-goal-chip",33,D),o()()),t&2){let e=c(2);i(4),b(e.report().goals)}}function q(t,n){if(t&1&&(r(0,"section",26)(1,"h2",27),a(2,"\u5B66\u3073"),o(),r(3,"div",28)(4,"p",29),a(5),o()()()),t&2){let e=c(2);i(5),u(e.report().learnings)}}function J(t,n){if(t&1&&(r(0,"div",39)(1,"span",41),a(2,"\u8981\u56E0\uFF1A"),o(),r(3,"span",42),a(4),o()()),t&2){let e=c().$implicit;i(4),u(e.factors)}}function K(t,n){if(t&1&&(r(0,"div",37)(1,"p",38),a(2),o(),g(3,J,5,1,"div",39),p(4,"app-status-badge",40),o()),t&2){let e=n.$implicit,l=c(3);i(2),u(e.content),i(),d(e.factors?3:-1),i(),m("status",l.getGoodPointStatusBadgeType(e.status))}}function Q(t,n){if(t&1&&(r(0,"section",26)(1,"h2",27)(2,"span",34),p(3,"app-icon",35),o(),a(4," \u3088\u304B\u3063\u305F\u3053\u3068 "),o(),r(5,"div",36),f(6,K,5,3,"div",37,D),o()()),t&2){let e=c(2);i(3),m("size",20),i(3),b(e.report().goodPoints)}}function X(t,n){if(t&1&&(r(0,"div",39)(1,"span",41),a(2,"\u30A2\u30AF\u30B7\u30E7\u30F3\uFF1A"),o(),r(3,"span",42),a(4),o()()),t&2){let e=c().$implicit;i(4),u(e.action)}}function Z(t,n){if(t&1&&(r(0,"div",37)(1,"p",38),a(2),o(),g(3,X,5,1,"div",39),p(4,"app-status-badge",40),o()),t&2){let e=n.$implicit,l=c(3);i(2),u(e.content),i(),d(e.action?3:-1),i(),m("status",l.getImprovementStatusBadgeType(e.status))}}function ee(t,n){if(t&1&&(r(0,"section",26)(1,"h2",27)(2,"span",34),p(3,"app-icon",43),o(),a(4," \u6539\u5584\u70B9 / \u30A2\u30AF\u30B7\u30E7\u30F3 "),o(),r(5,"div",36),f(6,Z,5,3,"div",37,D),o()()),t&2){let e=c(2);i(3),m("size",20),i(3),b(e.report().improvements)}}function te(t,n){if(t&1&&(r(0,"span",31),a(1),M(2,"date"),o()),t&2){let e=c(2);i(),P("\u66F4\u65B0: ",O(2,1,e.report().updatedAt,"yyyy/MM/dd HH:mm"),"")}}function ne(t,n){if(t&1){let e=h();r(0,"article",14)(1,"header",20)(2,"h1",21)(3,"span",22),p(4,"app-icon",23),o(),a(5),o(),r(6,"app-button",24),_("clicked",function(){x(e);let s=c();return v(s.onEdit())}),a(7," \u7DE8\u96C6\u3059\u308B "),o()(),g(8,Y,6,0,"section",25),r(9,"section",26)(10,"h2",27),a(11,"\u3067\u304D\u3054\u3068"),o(),r(12,"div",28)(13,"p",29),a(14),o()()(),g(15,q,6,1,"section",26)(16,Q,8,1,"section",26)(17,ee,8,1,"section",26),r(18,"footer",30)(19,"span",31),a(20),M(21,"date"),o(),g(22,te,3,4,"span",31),o()()}if(t&2){let e=c();i(4),m("size",20),i(),P(" ",e.formatDate(e.report().date)," "),i(3),d(e.report().goals&&e.report().goals.length>0?8:-1),i(6),u(e.report().events),i(),d(e.report().learnings?15:-1),i(),d(e.report().goodPoints&&e.report().goodPoints.length>0?16:-1),i(),d(e.report().improvements&&e.report().improvements.length>0?17:-1),i(3),P("\u4F5C\u6210: ",O(21,9,e.report().createdAt,"yyyy/MM/dd HH:mm"),""),i(2),d(e.report().updatedAt!==e.report().createdAt?22:-1)}}var V=class t{route=C(B);router=C(R);dailyReportService=C($);authService=C(T);currentUser=this.authService.currentUser;report=y(null);isLoading=y(!0);errorMessage=y(null);ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n?this.loadReport(n):(this.errorMessage.set("\u65E5\u5831ID\u304C\u6307\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093"),this.isLoading.set(!1))}loadReport(n){this.isLoading.set(!0),this.errorMessage.set(null),this.dailyReportService.getById(n).subscribe({next:e=>{this.report.set(e),this.isLoading.set(!1)},error:e=>{this.isLoading.set(!1),e.status===404?this.errorMessage.set("\u65E5\u5831\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093"):e.status===403?this.errorMessage.set("\u3053\u306E\u65E5\u5831\u3078\u306E\u30A2\u30AF\u30BB\u30B9\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093"):this.errorMessage.set(e.error?.message||"\u65E5\u5831\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F")}})}formatDate(n){let e=new Date(n),l=e.getFullYear(),s=e.getMonth()+1,j=e.getDate(),G=["\u65E5","\u6708","\u706B","\u6C34","\u6728","\u91D1","\u571F"][e.getDay()];return`${l}/${s}/${j}\uFF08${G}\uFF09`}goBack(){this.router.navigate(["/daily-reports"])}logout(){this.authService.logout().subscribe({next:()=>{this.router.navigate(["/login"])},error:()=>{this.router.navigate(["/login"])}})}retry(){let n=this.route.snapshot.paramMap.get("id");n&&this.loadReport(n)}onEdit(){let n=this.route.snapshot.paramMap.get("id");n&&this.router.navigate(["/daily-reports",n,"edit"])}getGoodPointStatusBadgeType(n){switch(n){case"\u672A\u5BFE\u5FDC":return"\u672A\u7740\u624B";case"\u672A\u9054":return"\u672A\u9054\u6210";case"\u518D\u73FE\u6210\u529F":return"\u518D\u73FE\u6210\u529F";default:return n}}getImprovementStatusBadgeType(n){return n}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=S({type:t,selectors:[["app-daily-report-detail-page"]],decls:19,vars:5,consts:[[1,"detail-container"],[1,"header"],[1,"header-content"],["routerLink","/",1,"logo"],["name","file-text","color","var(--color-primary-500)","ariaLabel","Daily Report",3,"size"],[1,"user-menu"],[1,"user-email"],[1,"logout-button",3,"click"],[1,"main"],[1,"back-nav"],[1,"back-button",3,"click"],[1,"back-icon"],[1,"loading-container"],[1,"error-container"],[1,"report-detail"],[1,"spinner"],["variant","error",3,"message"],[1,"error-actions"],["variant","secondary",3,"clicked"],["variant","primary",3,"clicked"],[1,"report-header"],[1,"report-date"],[1,"date-icon"],["name","calendar","color","var(--color-gray-600)","ariaLabel","\u65E5\u4ED8",3,"size"],["variant","secondary","size","sm","ariaLabel","\u7DE8\u96C6\u3059\u308B",3,"clicked"],[1,"section","section--goals"],[1,"section"],[1,"section-title"],[1,"section-content"],[1,"content-text"],[1,"report-footer"],[1,"meta-text"],[1,"goals-list"],[3,"goalId","goalName"],[1,"title-icon"],["name","heart","color","var(--color-primary-500)","ariaLabel","\u3088\u304B\u3063\u305F\u3053\u3068",3,"size"],[1,"items-list"],[1,"item-card"],[1,"item-content"],[1,"item-sub"],[3,"status"],[1,"sub-label"],[1,"sub-value"],["name","file-text","color","var(--color-primary-500)","ariaLabel","\u6539\u5584\u70B9",3,"size"]],template:function(e,l){e&1&&(r(0,"div",0)(1,"header",1)(2,"div",2)(3,"a",3),p(4,"app-icon",4),a(5," Daily Report "),o(),r(6,"div",5),g(7,H,2,1,"span",6),r(8,"button",7),_("click",function(){return l.logout()}),a(9,"\u30ED\u30B0\u30A2\u30A6\u30C8"),o()()()(),r(10,"main",8)(11,"div",9)(12,"button",10),_("click",function(){return l.goBack()}),r(13,"span",11),a(14,"\u2190"),o(),a(15," \u4E00\u89A7\u306B\u623B\u308B "),o()(),g(16,N,4,0,"div",12)(17,U,7,1,"div",13)(18,ne,23,12,"article",14),o()()),e&2&&(i(4),m("size",24),i(3),d(l.currentUser()?7:-1),i(9),d(l.isLoading()?16:-1),i(),d(l.errorMessage()?17:-1),i(),d(!l.isLoading()&&!l.errorMessage()&&l.report()?18:-1))},dependencies:[k,E,w,z,F,A,I,L],styles:[".detail-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--color-bg-secondary)}.header[_ngcontent-%COMP%]{background:var(--color-bg-primary);border-bottom:1px solid var(--color-border-default);padding:1rem 2rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-primary-500);text-decoration:none;display:flex;align-items:center;gap:.5rem;transition:opacity .2s}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{opacity:.8;text-decoration:none}.header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.header[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem;font-weight:500;color:var(--color-text-secondary);background:var(--color-bg-primary);border:1px solid var(--color-border-default);border-radius:6px;cursor:pointer;transition:all .2s}.header[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]:hover{color:var(--color-text-primary);border-color:var(--color-border-hover)}.main[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.back-nav[_ngcontent-%COMP%]{margin-bottom:1.5rem}.back-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .75rem;font-size:.875rem;font-weight:500;color:var(--color-text-secondary);background:transparent;border:none;border-radius:6px;cursor:pointer;transition:color .2s,background .2s}.back-button[_ngcontent-%COMP%]:hover{color:var(--color-text-primary);background:var(--color-gray-100)}.back-button[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-size:1rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;color:var(--color-text-secondary)}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem;background:var(--color-bg-primary);border-radius:12px;text-align:center}.error-container[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--color-gray-200);border-top-color:var(--color-primary-500);border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.report-detail[_ngcontent-%COMP%]{background:var(--color-bg-primary);border-radius:12px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.report-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--color-border-default);background:var(--color-gray-50)}.report-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.25rem;font-weight:700;color:var(--color-text-primary);margin:0}.report-date[_ngcontent-%COMP%]   .date-icon[_ngcontent-%COMP%]{font-size:1.25rem}.edit-button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.875rem;font-weight:500;color:var(--color-text-secondary);background:var(--color-bg-primary);border:1px solid var(--color-border-default);border-radius:6px;cursor:not-allowed;opacity:.5}.section[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid var(--color-border-default)}.section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.section[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{margin-top:0}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1rem;font-weight:600;color:var(--color-text-primary);margin:0 0 1rem}.section-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:1rem}.section-content[_ngcontent-%COMP%]{background:var(--color-gray-50);border-radius:8px;padding:1rem}.section--goals[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-bottom:.75rem}.section--goals[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{padding-top:2rem}.goals-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.content-text[_ngcontent-%COMP%]{margin:0;font-size:.9375rem;line-height:1.7;color:var(--color-text-primary);white-space:pre-wrap}.items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.item-card[_ngcontent-%COMP%]{background:var(--color-gray-50);border-radius:8px;padding:1rem;position:relative}.item-content[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.9375rem;line-height:1.6;color:var(--color-text-primary);padding-right:5rem}.item-sub[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary);margin-bottom:.5rem}.item-sub[_ngcontent-%COMP%]   .sub-label[_ngcontent-%COMP%]{font-weight:500}.item-card[_ngcontent-%COMP%]   app-status-badge[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}.report-footer[_ngcontent-%COMP%]{display:flex;gap:1.5rem;padding:1rem 1.5rem;background:var(--color-gray-50);border-top:1px solid var(--color-border-default)}.meta-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-text-tertiary)}@media (max-width: 640px){.header[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.main[_ngcontent-%COMP%]{padding:1rem}.report-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.report-footer[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}"]})};export{V as DailyReportDetailPageComponent};
