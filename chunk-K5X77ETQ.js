import{a as D}from"./chunk-OWWGA2SQ.js";import{a as y}from"./chunk-5LZP7W4Q.js";import{a as x}from"./chunk-ZJX46FKY.js";import{a as O}from"./chunk-SDZWKREU.js";import{b as l,c as b,d as w,e as _,f as P,g as E,l as S,n as A}from"./chunk-QUKDKHRQ.js";import"./chunk-LVTD2VF5.js";import"./chunk-OJTORZQT.js";import{b as B}from"./chunk-OLWX3WVW.js";import{e as v,s as F,t as M}from"./chunk-HCRNHK5J.js";import{Ba as n,Ka as f,Pa as g,S as p,Wa as i,_a as d,cb as a,db as u,eb as c,ib as C,jb as h,na as m,pb as s}from"./chunk-TUMKYTCV.js";import"./chunk-4CLCTAJ7.js";function L(o,r){if(o&1&&c(0,"app-alert-banner",4),o&2){let t=h();i("message",t.errorMessage())}}function N(o,r){o&1&&s(0," \u4F5C\u6210\u4E2D... ")}function G(o,r){o&1&&s(0," \u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u6210 ")}var k=class o{fb=p(S);authService=p(y);router=p(F);isLoading=m(!1);errorMessage=m(null);signupForm=this.fb.group({email:["",[l.required,l.email]],password:["",[l.required,l.minLength(8)]],confirmPassword:["",[l.required]]},{validators:this.passwordMatchValidator});passwordMatchValidator(r){let t=r.get("password"),e=r.get("confirmPassword");return t&&e&&t.value!==e.value?(e.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.signupForm.invalid){this.signupForm.markAllAsTouched();return}this.isLoading.set(!0),this.errorMessage.set(null);let{email:r,password:t}=this.signupForm.value;this.authService.signup({email:r,password:t}).subscribe({next:()=>{this.router.navigate(["/"])},error:e=>{this.isLoading.set(!1),this.errorMessage.set(e.error?.message||"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002")}})}getFieldError(r){return D(this.signupForm.get(r),r)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-signup-page"]],decls:20,vars:9,consts:[[1,"signup-container"],[1,"signup-card"],[1,"logo"],[1,"subtitle"],["variant","error",3,"message"],[1,"signup-form",3,"ngSubmit","formGroup"],["label","\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9","type","email","id","email","placeholder","your@email.com","autocomplete","email","formControlName","email",3,"errorMessage"],["label","\u30D1\u30B9\u30EF\u30FC\u30C9","type","password","id","password","placeholder","8\u6587\u5B57\u4EE5\u4E0A","autocomplete","new-password","formControlName","password",3,"errorMessage"],["label","\u30D1\u30B9\u30EF\u30FC\u30C9\uFF08\u78BA\u8A8D\uFF09","type","password","id","confirmPassword","placeholder","\u3082\u3046\u4E00\u5EA6\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044","autocomplete","new-password","formControlName","confirmPassword",3,"errorMessage"],["type","submit","variant","primary","size","md",3,"fullWidth","loading","disabled"],[1,"login-link"],["routerLink","/login"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),s(4,"Daily Report"),u(),a(5,"p",3),s(6,"\u30A2\u30AB\u30A6\u30F3\u30C8\u4F5C\u6210"),u()(),g(7,L,1,1,"app-alert-banner",4),a(8,"form",5),C("ngSubmit",function(){return e.onSubmit()}),c(9,"app-input-field",6)(10,"app-input-field",7)(11,"app-input-field",8),a(12,"app-button",9),g(13,N,1,0)(14,G,1,0),u()(),a(15,"div",10)(16,"span"),s(17,"\u3059\u3067\u306B\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u304A\u6301\u3061\u306E\u65B9\u306F"),u(),a(18,"a",11),s(19,"\u30ED\u30B0\u30A4\u30F3"),u()()()()),t&2&&(n(7),d(e.errorMessage()?7:-1),n(),i("formGroup",e.signupForm),n(),i("errorMessage",e.getFieldError("email")||""),n(),i("errorMessage",e.getFieldError("password")||""),n(),i("errorMessage",e.getFieldError("confirmPassword")||""),n(),i("fullWidth",!0)("loading",e.isLoading())("disabled",e.isLoading()),n(),d(e.isLoading()?13:14))},dependencies:[v,A,_,b,w,P,E,M,x,B,O],styles:[".signup-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-primary-600);padding:1rem}.signup-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fff;border-radius:16px;padding:2.5rem;box-shadow:0 25px 50px -12px #00000040}.logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-gray-800);margin:0}.logo[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-gray-500);margin:.5rem 0 0}.signup-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem;margin-top:1.5rem}.login-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.875rem;color:var(--color-gray-500)}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary-500);font-weight:500;text-decoration:none;margin-left:.25rem}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{k as SignupPageComponent};
