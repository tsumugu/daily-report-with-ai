import{a as T,b as W}from"./chunk-OJTORZQT.js";import{a as B,b as M,c as P}from"./chunk-OLWX3WVW.js";import{e as S,p as O,s as D,t as A}from"./chunk-HCRNHK5J.js";import{$ as _,Ba as t,Ka as C,Pa as d,S as w,Wa as u,_ as y,_a as l,ab as F,bb as E,cb as c,db as n,eb as f,fb as g,ia as b,ib as k,jb as s,pb as i,qb as x,rb as p,u as h}from"./chunk-TUMKYTCV.js";function V(o,r){if(o&1&&f(0,"app-status-badge",4),o&2){let e=s(2);u("status",e.status)}}function R(o,r){if(o&1&&(c(0,"span",8),i(1),n()),o&2){let e=s(2);t(),p(" \u6210\u529F: ",e.focus.item.success_count,"\u56DE ")}}function U(o,r){if(o&1&&(c(0,"div",9),f(1,"app-icon",17),c(2,"span",18),i(3),n()()),o&2){let e=s(2);t(),u("size",16),t(2),x(e.focus.goal.name)}}function j(o,r){if(o&1){let e=g();c(0,"div",0)(1,"div",1)(2,"span",2),f(3,"app-icon",3),i(4),n(),d(5,V,1,1,"app-status-badge",4),n(),c(6,"div",5)(7,"p",6),i(8),n(),c(9,"div",7),d(10,R,2,1,"span",8),n(),d(11,U,4,2,"div",9),n(),c(12,"div",10)(13,"span",11),f(14,"app-icon",12),i(15),n(),c(16,"div",13)(17,"app-icon-button",14),k("clicked",function(){y(e);let m=s();return _(m.onDelete())}),n(),c(18,"a",15),i(19," \u30D5\u30A9\u30ED\u30FC\u30A2\u30C3\u30D7 "),n(),c(20,"a",16),i(21," \u65E5\u5831\u3092\u898B\u308B "),n()()()()}if(o&2){let e=s();t(3),u("name",e.itemTypeIcon)("size",20)("color","var(--color-primary-500)")("ariaLabel",e.itemTypeLabel),t(),p(" ",e.itemTypeLabel," "),t(),l(e.status?5:-1),t(3),x((e.focus.item==null?null:e.focus.item.content)||"\u5185\u5BB9\u304C\u3042\u308A\u307E\u305B\u3093"),t(2),l(e.focus.item&&e.focus.item.success_count!==void 0?10:-1),t(),l(e.focus.goalId&&e.focus.goal?11:-1),t(3),u("size",16),t(),p(" ",e.focus.weekStartDate," "),t(2),u("size",20)("color","var(--color-primary-600)")("tooltip","\u30D5\u30A9\u30FC\u30AB\u30B9\u304B\u3089\u524A\u9664")("pinned",!0)("ariaLabel","\u30D5\u30A9\u30FC\u30AB\u30B9\u304B\u3089\u524A\u9664"),t(),u("routerLink",e.followupUrl),t(2),u("routerLink",e.reportDetailUrl)}}var v=class o{focus;deleteClicked=new b;onDelete(){this.focus?.id&&this.deleteClicked.emit(this.focus.id)}get itemTypeLabel(){return this.focus?.itemType==="goodPoint"?"\u3088\u304B\u3063\u305F\u3053\u3068":"\u6539\u5584\u70B9"}get itemTypeIcon(){return this.focus?.itemType==="goodPoint"?"heart":"file-text"}get reportDetailUrl(){return this.focus?.reportId?`/daily-reports/${this.focus.reportId}`:"#"}get followupUrl(){return this.focus?.itemType&&this.focus?.item?.id?`/followups/${this.focus.itemType}/${this.focus.item.id}`:"#"}get status(){return this.focus?.item?.status}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-weekly-focus-card"]],inputs:{focus:"focus"},outputs:{deleteClicked:"deleteClicked"},decls:1,vars:1,consts:[[1,"weekly-focus-card"],[1,"weekly-focus-card__header"],[1,"weekly-focus-card__type"],[3,"name","size","color","ariaLabel"],[3,"status"],[1,"weekly-focus-card__content"],[1,"weekly-focus-card__text"],[1,"weekly-focus-card__meta"],[1,"weekly-focus-card__success-count"],[1,"weekly-focus-card__goal"],[1,"weekly-focus-card__footer"],[1,"weekly-focus-card__date"],["name","calendar","color","var(--color-gray-600)","ariaLabel","\u65E5\u4ED8",3,"size"],[1,"weekly-focus-card__actions"],["iconName","pin",3,"clicked","size","color","tooltip","pinned","ariaLabel"],["aria-label","\u30D5\u30A9\u30ED\u30FC\u30A2\u30C3\u30D7",1,"weekly-focus-card__action-link","weekly-focus-card__action-link--outline",3,"routerLink"],["aria-label","\u65E5\u5831\u3092\u898B\u308B",1,"weekly-focus-card__action-link","weekly-focus-card__action-link--ghost",3,"routerLink"],["name","target","color","var(--color-primary-500)","ariaLabel","\u77ED\u671F\u76EE\u6A19",3,"size"],[1,"weekly-focus-card__goal-name"]],template:function(e,a){e&1&&d(0,j,22,18,"div",0),e&2&&l(a.focus?0:-1)},dependencies:[S,A,P,B,W],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--color-primary-50: #fffbeb;--color-primary-100: #fef3c7;--color-primary-200: #fde68a;--color-primary-300: #fcd34d;--color-primary-400: #fbbf24;--color-primary-500: #f59e0b;--color-primary-600: #d97706;--color-primary-700: #b45309;--color-primary-800: #92400e;--color-primary-900: #78350f;--color-secondary-50: #f0fdfa;--color-secondary-100: #ccfbf1;--color-secondary-200: #99f6e4;--color-secondary-300: #5eead4;--color-secondary-400: #2dd4bf;--color-secondary-500: #14b8a6;--color-secondary-600: #0d9488;--color-secondary-700: #0f766e;--color-secondary-800: #115e59;--color-secondary-900: #134e4a;--color-gray-50: #f9fafb;--color-gray-100: #f3f4f6;--color-gray-200: #e5e7eb;--color-gray-300: #d1d5db;--color-gray-400: #9ca3af;--color-gray-500: #6b7280;--color-gray-600: #4b5563;--color-gray-700: #374151;--color-gray-800: #1f2937;--color-gray-900: #111827;--color-success-50: #ecfdf5;--color-success-100: #d1fae5;--color-success-500: #10b981;--color-success-600: #059669;--color-success-700: #047857;--color-warning-50: #fffbeb;--color-warning-100: #fef3c7;--color-warning-500: #f59e0b;--color-warning-600: #d97706;--color-warning-700: #b45309;--color-error-50: #fef2f2;--color-error-100: #fee2e2;--color-error-500: #ef4444;--color-error-600: #dc2626;--color-error-700: #b91c1c;--color-info-50: #eff6ff;--color-info-100: #dbeafe;--color-info-500: #3b82f6;--color-info-600: #2563eb;--color-info-700: #1d4ed8;--color-bg-primary: #ffffff;--color-bg-secondary: #ffffff;--color-bg-tertiary: #ffffff;--color-text-primary: var(--color-gray-900);--color-text-secondary: var(--color-gray-600);--color-text-tertiary: var(--color-gray-500);--color-text-disabled: var(--color-gray-400);--color-text-inverse: #ffffff;--color-border-default: var(--color-gray-200);--color-border-hover: var(--color-gray-300);--color-border-focus: var(--color-primary-500);--color-border-error: var(--color-error-500)}.weekly-focus-card[_ngcontent-%COMP%]{background-color:var(--color-bg-primary);border:1px solid var(--color-border-default);border-radius:.5rem;padding:1rem;display:flex;flex-direction:column;gap:.75rem;transition:box-shadow .2s}.weekly-focus-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 4px #0000001a}.weekly-focus-card__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.weekly-focus-card__type[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-text-secondary)}.weekly-focus-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.weekly-focus-card__text[_ngcontent-%COMP%]{margin:0;font-size:.9375rem;line-height:1.5;color:var(--color-text-primary);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.weekly-focus-card__meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.weekly-focus-card__success-count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.weekly-focus-card__goal[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.75rem;padding:.5rem;background-color:var(--color-primary-50);border-radius:.25rem;border:1px solid var(--color-primary-200)}.weekly-focus-card__goal-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-primary-700)}.weekly-focus-card__footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:auto;padding-top:.5rem;border-top:1px solid var(--color-border-default)}.weekly-focus-card__date[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-text-secondary)}.weekly-focus-card__actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.weekly-focus-card__action-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.375rem .75rem;font-size:.875rem;font-weight:500;text-decoration:none;border-radius:.375rem;cursor:pointer;transition:all .2s}.weekly-focus-card__action-link--outline[_ngcontent-%COMP%]{color:var(--color-primary-600);border:1px solid var(--color-primary-600);background-color:transparent}.weekly-focus-card__action-link--outline[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-50)}.weekly-focus-card__action-link--ghost[_ngcontent-%COMP%]{color:var(--color-text-secondary);border:none;background-color:transparent}.weekly-focus-card__action-link--ghost[_ngcontent-%COMP%]:hover{background-color:var(--color-gray-100)}']})};var $=(o,r)=>r.id;function q(o,r){if(o&1){let e=g();c(0,"app-button",9),k("clicked",function(){y(e);let m=s();return _(m.onAddClick())}),i(1," \uFF0B\u8FFD\u52A0 "),n()}}function G(o,r){o&1&&(c(0,"div",5),i(1," \u8AAD\u307F\u8FBC\u307F\u4E2D... "),n())}function H(o,r){if(o&1&&(c(0,"div",6),i(1),n()),o&2){let e=s();t(),p(" ",e.error," ")}}function J(o,r){o&1&&(c(0,"div",7)(1,"p",10),i(2," \u4ECA\u9031\u306E\u30D5\u30A9\u30FC\u30AB\u30B9\u304C"),f(3,"br"),i(4," \u8A2D\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093 "),n()())}function K(o,r){if(o&1){let e=g();c(0,"app-weekly-focus-card",12),k("deleteClicked",function(m){y(e);let z=s(2);return _(z.onDelete(m))}),n()}if(o&2){let e=r.$implicit;u("focus",e)}}function Q(o,r){if(o&1&&(c(0,"div",8),F(1,K,1,1,"app-weekly-focus-card",11,$),n()),o&2){let e=s();t(),E(e.focuses)}}var I=class o{weeklyFocusService=w(T);router=w(D);showAddButton=!0;addClicked=new b;focuses=[];loading=!1;error=null;subscription;routerSubscription;ngOnInit(){this.loadFocuses(),this.routerSubscription=this.router.events.pipe(h(r=>r instanceof O)).subscribe(r=>{let e=r;(e.url==="/home"||e.url==="/")&&this.loadFocuses()})}ngOnDestroy(){this.subscription?.unsubscribe(),this.routerSubscription?.unsubscribe()}loadFocuses(){this.loading=!0,this.error=null,this.subscription=this.weeklyFocusService.getCurrentWeekFocuses().subscribe({next:r=>{this.focuses=r,this.loading=!1},error:()=>{this.error="\u30D5\u30A9\u30FC\u30AB\u30B9\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F",this.loading=!1}})}onAddClick(){this.addClicked.emit()}onDelete(r){this.subscription=this.weeklyFocusService.deleteWeeklyFocus(r).subscribe({next:()=>{this.loadFocuses()},error:()=>{this.error="\u30D5\u30A9\u30FC\u30AB\u30B9\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F"}})}get isEmpty(){return!this.loading&&this.focuses.length===0}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-weekly-focus-section"]],inputs:{showAddButton:"showAddButton"},outputs:{addClicked:"addClicked"},decls:10,vars:5,consts:[[1,"weekly-focus-section"],[1,"weekly-focus-section__header"],[1,"weekly-focus-section__title"],["variant","secondary","size","sm","ariaLabel","\u30D5\u30A9\u30FC\u30AB\u30B9\u3092\u8FFD\u52A0"],[1,"weekly-focus-section__content"],[1,"weekly-focus-section__loading"],[1,"weekly-focus-section__error"],[1,"weekly-focus-section__empty"],[1,"weekly-focus-section__list"],["variant","secondary","size","sm","ariaLabel","\u30D5\u30A9\u30FC\u30AB\u30B9\u3092\u8FFD\u52A0",3,"clicked"],[1,"weekly-focus-section__empty-message"],[3,"focus"],[3,"deleteClicked","focus"]],template:function(e,a){e&1&&(c(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"\u4ECA\u9031\u306E\u30D5\u30A9\u30FC\u30AB\u30B9"),n(),d(4,q,2,0,"app-button",3),n(),c(5,"div",4),d(6,G,2,0,"div",5)(7,H,2,1,"div",6)(8,J,5,0,"div",7)(9,Q,3,0,"div",8),n()()),e&2&&(t(4),l(a.showAddButton?4:-1),t(2),l(a.loading?6:-1),t(),l(a.error?7:-1),t(),l(a.isEmpty?8:-1),t(),l(!a.loading&&!a.error&&!a.isEmpty?9:-1))},dependencies:[v,M],styles:['@charset "UTF-8";[_ngcontent-%COMP%]:root{--color-primary-50: #fffbeb;--color-primary-100: #fef3c7;--color-primary-200: #fde68a;--color-primary-300: #fcd34d;--color-primary-400: #fbbf24;--color-primary-500: #f59e0b;--color-primary-600: #d97706;--color-primary-700: #b45309;--color-primary-800: #92400e;--color-primary-900: #78350f;--color-secondary-50: #f0fdfa;--color-secondary-100: #ccfbf1;--color-secondary-200: #99f6e4;--color-secondary-300: #5eead4;--color-secondary-400: #2dd4bf;--color-secondary-500: #14b8a6;--color-secondary-600: #0d9488;--color-secondary-700: #0f766e;--color-secondary-800: #115e59;--color-secondary-900: #134e4a;--color-gray-50: #f9fafb;--color-gray-100: #f3f4f6;--color-gray-200: #e5e7eb;--color-gray-300: #d1d5db;--color-gray-400: #9ca3af;--color-gray-500: #6b7280;--color-gray-600: #4b5563;--color-gray-700: #374151;--color-gray-800: #1f2937;--color-gray-900: #111827;--color-success-50: #ecfdf5;--color-success-100: #d1fae5;--color-success-500: #10b981;--color-success-600: #059669;--color-success-700: #047857;--color-warning-50: #fffbeb;--color-warning-100: #fef3c7;--color-warning-500: #f59e0b;--color-warning-600: #d97706;--color-warning-700: #b45309;--color-error-50: #fef2f2;--color-error-100: #fee2e2;--color-error-500: #ef4444;--color-error-600: #dc2626;--color-error-700: #b91c1c;--color-info-50: #eff6ff;--color-info-100: #dbeafe;--color-info-500: #3b82f6;--color-info-600: #2563eb;--color-info-700: #1d4ed8;--color-bg-primary: #ffffff;--color-bg-secondary: #ffffff;--color-bg-tertiary: #ffffff;--color-text-primary: var(--color-gray-900);--color-text-secondary: var(--color-gray-600);--color-text-tertiary: var(--color-gray-500);--color-text-disabled: var(--color-gray-400);--color-text-inverse: #ffffff;--color-border-default: var(--color-gray-200);--color-border-hover: var(--color-gray-300);--color-border-focus: var(--color-primary-500);--color-border-error: var(--color-error-500)}.weekly-focus-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.weekly-focus-section__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.weekly-focus-section__title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--color-text-primary)}.weekly-focus-section__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.weekly-focus-section__loading[_ngcontent-%COMP%], .weekly-focus-section__error[_ngcontent-%COMP%]{padding:1rem;text-align:center;color:var(--color-text-secondary)}.weekly-focus-section__error[_ngcontent-%COMP%]{color:var(--color-error-600)}.weekly-focus-section__empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:2rem 1rem;text-align:center}.weekly-focus-section__empty-message[_ngcontent-%COMP%]{margin:0;font-size:.9375rem;color:var(--color-text-secondary);line-height:1.6}.weekly-focus-section__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}']})};export{I as a};
