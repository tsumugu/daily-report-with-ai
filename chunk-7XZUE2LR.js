import{d as B,g as F,i as V}from"./chunk-ZJX46FKY.js";import{a as T}from"./chunk-SDZWKREU.js";import{q as O}from"./chunk-QUKDKHRQ.js";import"./chunk-LVTD2VF5.js";import"./chunk-OJTORZQT.js";import{b as w}from"./chunk-OLWX3WVW.js";import{e as k,q as S,s as G,t as A}from"./chunk-HCRNHK5J.js";import{$ as m,Ba as l,Ka as D,Pa as C,S as x,Wa as g,_,_a as c,ab as b,bb as y,cb as a,db as n,eb as f,fb as v,ib as p,jb as r,na as u,pb as o,qb as h,rb as E,sb as P,ub as M}from"./chunk-TUMKYTCV.js";import"./chunk-4CLCTAJ7.js";var R=i=>["/goals",i],z=(i,t)=>t.id;function j(i,t){if(i&1&&f(0,"app-alert-banner",4),i&2){let e=r();g("message",e.errorMessage())}}function H(i,t){i&1&&(a(0,"div",5),o(1,"\u8AAD\u307F\u8FBC\u307F\u4E2D..."),n())}function $(i,t){if(i&1&&(a(0,"div",11)(1,"span",12),o(2,"\u8AAC\u660E"),n(),a(3,"span",13),o(4),n()()),i&2){let e=r(2);l(4),h(e.goal().description)}}function N(i,t){if(i&1&&(a(0,"div",11)(1,"span",12),o(2,"\u4E0A\u4F4D\u76EE\u6A19"),n(),a(3,"span",13)(4,"a",18),o(5),n()()()),i&2){let e=r(2);l(4),g("routerLink",M(2,R,e.goal().parent.id)),l(),E(" ",e.goal().parent.name," ")}}function q(i,t){if(i&1&&(a(0,"div",11)(1,"span",12),o(2,"\u9054\u6210\u57FA\u6E96"),n(),a(3,"span",13),o(4),n()()),i&2){let e=r(2);l(4),h(e.goal().successCriteria)}}function J(i,t){if(i&1){let e=v();a(0,"app-hierarchy-card",21),p("clicked",function(){let d=_(e).$implicit,L=r(3);return m(L.router.navigate(["/goals",d.id]))}),n()}if(i&2){let e=t.$implicit,s=r(3);g("data",s.getChildCardData(e))}}function K(i,t){if(i&1&&(a(0,"section",8)(1,"h2",9),o(2,"\u4E0B\u4F4D\u76EE\u6A19"),n(),a(3,"div",19),b(4,J,1,1,"app-hierarchy-card",20,z),n()()),i&2){let e=r(2);l(4),y(e.goal().children)}}function Q(i,t){if(i&1){let e=v();a(0,"section",8)(1,"h2",9),o(2,"\u9031\u6B21\u30D5\u30A9\u30FC\u30AB\u30B9"),n(),a(3,"app-button",22),p("clicked",function(){_(e);let d=r(2);return m(d.router.navigate(["/followups"]))}),o(4," \u9031\u6B21\u30D5\u30A9\u30FC\u30AB\u30B9\u3092\u8A2D\u5B9A "),n(),a(5,"p",23),o(6," \u77ED\u671F\u76EE\u6A19\u3068\u9031\u6B21\u30D5\u30A9\u30FC\u30AB\u30B9\u3092\u63A5\u7D9A\u3059\u308B\u3053\u3068\u3067\u3001\u65E5\u3005\u306E\u6D3B\u52D5\u3068\u76EE\u6A19\u9054\u6210\u3092\u7D50\u3073\u3064\u3051\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002 "),n()()}}function U(i,t){if(i&1){let e=v();a(0,"div",6)(1,"section",8)(2,"h2",9),o(3,"\u76EE\u6A19\u60C5\u5831"),n(),a(4,"div",10)(5,"div",11)(6,"span",12),o(7,"\u76EE\u6A19\u540D"),n(),a(8,"span",13),o(9),n()(),C(10,$,5,1,"div",11),a(11,"div",11)(12,"span",12),o(13,"\u671F\u9593"),n(),a(14,"span",13),o(15),n()(),C(16,N,6,4,"div",11),a(17,"div",11)(18,"span",12),o(19,"\u76EE\u6A19\u306E\u6027\u8CEA"),n(),a(20,"span",13),o(21),n()(),C(22,q,5,1,"div",11),n()(),a(23,"div",14)(24,"app-button",15),p("clicked",function(){_(e);let d=r();return m(d.onEdit())}),o(25," \u7DE8\u96C6 "),n(),a(26,"app-button",15),p("clicked",function(){_(e);let d=r();return m(d.onCreateChild())}),o(27," \u4E0B\u4F4D\u76EE\u6A19\u3092\u4F5C\u6210 "),n(),a(28,"app-button",16),p("clicked",function(){_(e);let d=r();return m(d.onDelete())}),o(29," \u524A\u9664 "),n()(),C(30,K,6,0,"section",8)(31,Q,7,0,"section",8),a(32,"section",8),f(33,"app-related-daily-reports-list",17),n()()}if(i&2){let e=r();l(9),h(e.goal().name),l(),c(e.goal().description?10:-1),l(5),P(" ",e.goal().startDate," \u301C ",e.goal().endDate," "),l(),c(e.goal().parent?16:-1),l(5),E(" ",e.getGoalTypeLabel(e.goal().goalType)," "),l(),c(e.goal().successCriteria?22:-1),l(2),g("disabled",e.isDeleting()),l(2),g("disabled",e.isDeleting()),l(2),g("disabled",e.isDeleting()),l(2),c(e.goal().children.length>0?30:-1),l(),c(e.isShortTermGoal?31:-1),l(2),g("goalId",e.goal().id)}}function W(i,t){if(i&1&&f(0,"app-toast",7),i&2){let e=r();g("message",e.toastMessage())("variant",e.toastVariant())}}var I=class i{route=x(S);router=x(G);goalService=x(F);goal=u(null);isLoading=u(!1);errorMessage=u(null);isDeleting=u(!1);toastMessage=u(null);toastVariant=u("success");ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.loadGoal(t)}loadGoal(t){this.isLoading.set(!0),this.errorMessage.set(null),this.goalService.getGoal(t).subscribe({next:e=>{this.goal.set(e),this.isLoading.set(!1)},error:e=>{this.errorMessage.set(e.error?.message||"\u76EE\u6A19\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F"),this.isLoading.set(!1)}})}onDelete(){let t=this.goal();t&&confirm("\u3053\u306E\u76EE\u6A19\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F\u4E0B\u4F4D\u76EE\u6A19\u304C\u5B58\u5728\u3059\u308B\u5834\u5408\u306F\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002")&&(this.isDeleting.set(!0),this.errorMessage.set(null),this.goalService.deleteGoal(t.id).subscribe({next:()=>{this.showToast("\u76EE\u6A19\u3092\u524A\u9664\u3057\u307E\u3057\u305F","success"),this.router.navigate(["/goals"])},error:e=>{this.errorMessage.set(e.error?.message||"\u76EE\u6A19\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F"),this.isDeleting.set(!1)}}))}onCreateChild(){let t=this.goal();t&&this.router.navigate(["/goals/new"],{queryParams:{parentId:t.id}})}onEdit(){let t=this.goal();t&&this.router.navigate(["/goals",t.id,"edit"])}getGoalTypeLabel(t){return t?{skill:"\u30B9\u30AD\u30EB\u7FD2\u5F97",project:"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u5B8C\u4E86",habit:"\u7FD2\u6163\u5F62\u6210",other:"\u305D\u306E\u4ED6"}[t]||t:"-"}getGoalLevel(){let t=this.goal();return!t||!t.parentId?"long":"medium"}getChildCardData(t){return{id:t.id,title:t.name}}get isShortTermGoal(){let t=this.goal();return t?t.children.length===0:!1}showToast(t,e){this.toastMessage.set(t),this.toastVariant.set(e),setTimeout(()=>{this.toastMessage.set(null)},3e3)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=D({type:i,selectors:[["app-goal-detail-page"]],decls:10,vars:4,consts:[[1,"goal-detail-page"],[1,"goal-detail-page__header"],["type","button","aria-label","\u623B\u308B",1,"goal-detail-page__back-button",3,"click"],[1,"goal-detail-page__title"],["variant","error",3,"message"],[1,"goal-detail-page__loading"],[1,"goal-detail-page__content"],[3,"message","variant"],[1,"goal-detail-page__section"],[1,"goal-detail-page__section-title"],[1,"goal-detail-page__info"],[1,"goal-detail-page__info-item"],[1,"goal-detail-page__info-label"],[1,"goal-detail-page__info-value"],[1,"goal-detail-page__actions"],["variant","secondary",3,"clicked","disabled"],["variant","danger",3,"clicked","disabled"],[3,"goalId"],[1,"goal-detail-page__link",3,"routerLink"],[1,"goal-detail-page__children"],[3,"data"],[3,"clicked","data"],["variant","secondary",3,"clicked"],[1,"goal-detail-page__note"]],template:function(e,s){e&1&&(a(0,"div",0)(1,"header",1)(2,"button",2),p("click",function(){return s.router.navigate(["/goals"])}),o(3," \u2190 "),n(),a(4,"h1",3),o(5,"\u76EE\u6A19\u8A73\u7D30"),n()(),C(6,j,1,1,"app-alert-banner",4)(7,H,2,0,"div",5)(8,U,34,13,"div",6)(9,W,1,2,"app-toast",7),n()),e&2&&(l(6),c(s.errorMessage()?6:-1),l(),c(s.isLoading()?7:-1),l(),c(s.goal()&&!s.isLoading()?8:-1),l(),c(s.toastMessage()?9:-1))},dependencies:[k,A,w,T,O,B,V],styles:[".goal-detail-page[_ngcontent-%COMP%]{padding:1rem;max-width:1200px;margin:0 auto}.goal-detail-page__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.goal-detail-page__back-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;border:none;background-color:transparent;color:var(--color-gray-700);font-size:1.25rem;cursor:pointer;border-radius:.25rem;transition:all .2s ease}.goal-detail-page__back-button[_ngcontent-%COMP%]:hover{background-color:var(--color-gray-100);color:var(--color-gray-900)}.goal-detail-page__back-button[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-primary-500);outline-offset:2px}.goal-detail-page__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--color-gray-900);margin:0}.goal-detail-page__loading[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:var(--color-gray-600)}.goal-detail-page__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.goal-detail-page__section[_ngcontent-%COMP%]{background-color:var(--color-white);border:1px solid var(--color-gray-200);border-radius:.5rem;padding:1.5rem}.goal-detail-page__section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-gray-900);margin:0 0 1rem}.goal-detail-page__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.goal-detail-page__info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.goal-detail-page__info-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-gray-600)}.goal-detail-page__info-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-gray-900);word-break:break-word}.goal-detail-page__link[_ngcontent-%COMP%]{color:var(--color-primary-600);text-decoration:none;transition:color .2s ease}.goal-detail-page__link[_ngcontent-%COMP%]:hover{color:var(--color-primary-700);text-decoration:underline}.goal-detail-page__actions[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.goal-detail-page__children[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.goal-detail-page__note[_ngcontent-%COMP%]{margin-top:1rem;font-size:.875rem;color:var(--color-gray-600)}"]})};export{I as GoalDetailPageComponent};
