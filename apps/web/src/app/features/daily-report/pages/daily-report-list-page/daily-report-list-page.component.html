<div class="list-container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <a routerLink="/" class="logo">
        <app-icon name="file-text" [size]="24" color="var(--color-primary-500)" ariaLabel="Daily Report" />
        Daily Report
      </a>
      <div class="user-menu">
        @if (currentUser()) {
          <span class="user-email">{{ currentUser()?.email }}</span>
        }
        <button class="logout-button" (click)="logout()">ログアウト</button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <div class="page-header">
      <h1 class="page-title">日報一覧</h1>
      <a routerLink="/daily-reports/new" class="new-report-button">
        <span class="plus-icon">＋</span>
        日報を書く
      </a>
    </div>

    <!-- Loading -->
    @if (isLoading()) {
      <div class="loading-container">
        <div class="spinner"></div>
        <p>読み込み中...</p>
      </div>
    }

    <!-- Error -->
    @if (errorMessage()) {
      <div class="error-container">
        <app-alert-banner variant="error" [message]="errorMessage()!" />
        <app-button variant="primary" (clicked)="retry()">再読み込み</app-button>
      </div>
    }

    <!-- Empty State -->
    @if (!isLoading() && !errorMessage() && reports().length === 0) {
      <app-empty-state
        iconName="clipboard"
        message="まだ日報がありません"
        subMessage="今日の日報を書いてみましょう！"
        actionButtonText="日報を書く"
        actionButtonRoute="/daily-reports/new"
        actionButtonIcon="plus"
      />
    }

    <!-- Report List -->
    @if (!isLoading() && !errorMessage() && reports().length > 0) {
      <div class="report-list" [@listItem]>
        @for (report of reports(); track report.id) {
          <app-report-card [report]="report" (cardClick)="onReportClick($event)" />
        }
      </div>

      <!-- Load More -->
      @if (hasMore) {
        <div class="load-more-container">
          @if (isLoadingMore()) {
            <div class="spinner spinner--small"></div>
            <p>読み込み中...</p>
          } @else {
            <app-button variant="secondary" (clicked)="loadMore()">もっと見る</app-button>
          }
        </div>
      }
    }
  </main>
</div>

