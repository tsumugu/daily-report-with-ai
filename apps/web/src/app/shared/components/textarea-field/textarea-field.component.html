<div class="textarea-field">
  @if (label) {
    <label [for]="id" class="textarea-field__label">
      @if (labelIcon) {
        <span class="textarea-field__icon">
          <app-icon [name]="labelIcon" [size]="20" color="var(--color-primary-500)" ariaLabel="" />
        </span>
      }
      {{ label }}
      @if (required) {
        <span class="textarea-field__required">*</span>
      }
    </label>
  }
  
  <textarea
    [id]="id"
    [value]="_value()"
    [placeholder]="placeholder"
    [disabled]="disabled"
    [rows]="rows"
    [attr.maxlength]="maxLength"
    [class.textarea-field__textarea--error]="hasError"
    [class.textarea-field__textarea--disabled]="disabled"
    class="textarea-field__textarea"
    (input)="onInput($event)"
    (focus)="onFocus()"
    (blur)="onBlur()"
  ></textarea>
  
  @if (shouldShowError) {
    <span class="textarea-field__error">{{ errorMessage }}</span>
  }
  
  @if (showCharCount) {
    <div class="textarea-field__char-count" [class.textarea-field__char-count--over]="isOverLimit()">
      {{ charCount() }}/{{ maxLength }}
    </div>
  }
</div>

