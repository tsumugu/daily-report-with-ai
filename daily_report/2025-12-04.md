# 日報 2025-12-04

## 今日の進捗

### ドキュメント整備
- `docs/general/design_system.md` をわかりやすくリライト
- `docs/general/arch.md`（アーキテクチャ方針）新規作成
- `docs/general/general_prd.md`（全体要件定義）新規作成
  - サービス概要、ターゲットユーザー、主要機能、KPI、Happy Pathシナリオ
- `docs/general/roadmap.md`（ロードマップ）新規作成
  - Phase 1〜4 の機能分割と優先度整理

### ルール定義
- `docs/rules/ground.md` に判断・リサーチの根拠ルール追加
- `docs/rules/jobs/helper.md`（user-helperロール）新規作成
- `docs/rules/jobs/eng.md` / `des.md` 更新
  - リサーチ → 設計 → セルフレビュー → クロスレビュー のプロセス追加

### Feature ドキュメント作成（Phase 1）
| feature | prd.md | tech_research.md | des_research.md | tech_spec.md | ui_design.md |
|:--------|:------:|:----------------:|:---------------:|:------------:|:------------:|
| auth | ✅ | ✅ | ✅ | ✅ | ✅ |
| daily-report-input | ✅ | ✅ | ✅ | ✅ | ✅ |
| daily-report-list | ✅ | ✅ | ✅ | ✅ | ✅ |

### クロスレビュー実施
- tech_spec ↔ ui_design の整合性確認
- 齟齬を発見し修正完了（auth/meAPI追加、レスポンス形式修正等）

### 開発環境
- Angular プロジェクト初期化
- ESLint / Storybook セットアップ
- Lint エラー修正（Angular ESLint対応）

---

## 今日 helper に聞いて学んだこと

### 1. HTTPS通信下での平文パスワード送信は一般的
- 「POST /api/auth/signup で平文パスワードを送るのは問題ない？」と質問
- **学び**: HTTPS（TLS）で通信路は暗号化されているため、平文送信 → サーバー側bcryptハッシュ化は業界標準。クライアント側ハッシュ化はPass-the-Hash攻撃のリスクがあり非推奨。

### 2. huskyの最新の使い方
- `npx husky install` / `npx husky add` が deprecated と出て困った
- **学び**: husky v8以降はCLIコマンドが非推奨。`package.json` の `prepare` スクリプト経由 + 手動でhookファイル作成が推奨。代替として `simple-git-hooks` も有効。

### 3. 一覧取得のlimitデフォルト値
- 「20件より30件のほうが1ヶ月分見れて良いのでは？」と相談
- **学び**: 日報は1日1件が基本なので、30件 ≒ 1ヶ月分という直感的な単位になる。月次振り返りに便利。採用！

### 4. データモデルの参照方向
- 「GoodPoint/ImprovementからDailyReportへの参照（dailyReportId）は必要？」と質問
- **学び**: 参照方向は DailyReport → GoodPoint/Improvement が正しい。逆方向は不要。DailyReport側に `goodPointIds[]` / `improvementIds[]` を持つ設計に修正。

### 5. クロスレビューの重要性
- tech_spec と ui_design を別々に作ると齟齬が発生しやすい
- **学び**: 作成後に Eng ↔ Des でクロスレビューし、API/データ構造とUIの整合性を確認するプロセスをルール化した。

---

## 明日やること
- [ ] Phase 1 機能の実装着手
- [ ] Storybookにコンポーネント登録
- [ ] 認証機能から実装開始

