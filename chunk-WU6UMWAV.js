import{a as O}from"./chunk-OWWGA2SQ.js";import{a as F}from"./chunk-3UVZF2MZ.js";import{a as S}from"./chunk-FP5FAGTQ.js";import{a as w}from"./chunk-LAAXQWOZ.js";import{b as m,c as M,d as b,e as x,f as P,g as E,l as A,n as L}from"./chunk-WDCYXXKM.js";import"./chunk-2PLPPA42.js";import"./chunk-FDSPUVB4.js";import{b as B}from"./chunk-HQG2HRKI.js";import{e as h,s as y,t as _}from"./chunk-ITJ4DFX5.js";import{Ba as i,Ka as f,Pa as p,S as s,Wa as l,_a as d,cb as r,db as u,eb as c,ib as C,jb as v,na as g,pb as a}from"./chunk-TUMKYTCV.js";import"./chunk-4CLCTAJ7.js";function D(o,t){if(o&1&&c(0,"app-alert-banner",4),o&2){let n=v();l("message",n.errorMessage())}}function N(o,t){o&1&&a(0," \u30ED\u30B0\u30A4\u30F3\u4E2D... ")}function G(o,t){o&1&&a(0," \u30ED\u30B0\u30A4\u30F3 ")}var k=class o{fb=s(A);authService=s(F);router=s(y);isLoading=g(!1);errorMessage=g(null);loginForm=this.fb.group({email:["",[m.required,m.email]],password:["",[m.required,m.minLength(8)]]});onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading.set(!0),this.errorMessage.set(null);let{email:t,password:n}=this.loginForm.value;this.authService.login({email:t,password:n}).subscribe({next:()=>{this.router.navigate(["/"])},error:e=>{this.isLoading.set(!1),this.errorMessage.set(e.error?.message||"\u30ED\u30B0\u30A4\u30F3\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3068\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002")}})}getFieldError(t){return O(this.loginForm.get(t),t)}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=f({type:o,selectors:[["app-login-page"]],decls:19,vars:8,consts:[[1,"login-container"],[1,"login-card"],[1,"logo"],[1,"subtitle"],["variant","error",3,"message"],[1,"login-form",3,"ngSubmit","formGroup"],["label","\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9","type","email","id","email","placeholder","your@email.com","autocomplete","email","formControlName","email",3,"errorMessage"],["label","\u30D1\u30B9\u30EF\u30FC\u30C9","type","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password","formControlName","password",3,"errorMessage"],["type","submit","variant","primary","size","md",3,"fullWidth","loading","disabled"],[1,"signup-link"],["routerLink","/signup"]],template:function(n,e){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"Daily Report"),u(),r(5,"p",3),a(6,"\u65E5\u5831\u7BA1\u7406\u30B7\u30B9\u30C6\u30E0"),u()(),p(7,D,1,1,"app-alert-banner",4),r(8,"form",5),C("ngSubmit",function(){return e.onSubmit()}),c(9,"app-input-field",6)(10,"app-input-field",7),r(11,"app-button",8),p(12,N,1,0)(13,G,1,0),u()(),r(14,"div",9)(15,"span"),a(16,"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u304A\u6301\u3061\u3067\u306A\u3044\u65B9\u306F"),u(),r(17,"a",10),a(18,"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u6210"),u()()()()),n&2&&(i(7),d(e.errorMessage()?7:-1),i(),l("formGroup",e.loginForm),i(),l("errorMessage",e.getFieldError("email")||""),i(),l("errorMessage",e.getFieldError("password")||""),i(),l("fullWidth",!0)("loading",e.isLoading())("disabled",e.isLoading()),i(),d(e.isLoading()?12:13))},dependencies:[h,L,x,M,b,P,E,_,S,B,w],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--color-primary-600);padding:1rem}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;background:#fff;border-radius:16px;padding:2.5rem;box-shadow:0 25px 50px -12px #00000040}.logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-gray-800);margin:0}.logo[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-gray-500);margin:.5rem 0 0}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem;margin-top:1.5rem}.signup-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.875rem;color:var(--color-gray-500)}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary-500);font-weight:500;text-decoration:none;margin-left:.25rem}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{k as LoginPageComponent};
