---
description: "プロトタイプ作成ルール。Storybookを使ったプロトタイプの作成方法とレビュープロセス"
alwaysApply: true
---

# プロトタイプレギュレーション

## 1. 目的

`ui_design.md` の静的ドキュメントだけでは伝わりにくい「見た目」と「挙動」を、実際に動くプロトタイプで確認する。
プロトタイプは、ユーザーやHelperが実際に操作してUXを確認し、使いやすさや改善点をフィードバックするために使用する。

## 2. プロトタイプの定義

プロトタイプは、**実際に見た目が実装されていて、機能の挙動が紙芝居的にわかる**ものを最低ラインとする。

### 2.1. 必須要件

| 要件                 | 説明                                                   | 例                                                                                |
| -------------------- | ------------------------------------------------------ | --------------------------------------------------------------------------------- |
| **視覚的な実装**     | 実際の見た目が再現されている                           | レイアウト、カラー、タイポグラフィ、スペーシングが実装されている                  |
| **紙芝居的な挙動**   | インタラクションの流れが確認できる                     | ボタンクリックで次の画面/状態に遷移する、フォーム入力でバリデーションが表示される |
| **主要な状態の表現** | 正常系・エラー・ローディング等の主要な状態が確認できる | 初期状態、成功状態、エラー状態、空状態など                                        |

### 2.2. 実装レベル

プロトタイプは**実装の前段階**であり、以下は不要：

- 実際のAPI連携（モックデータで可）
- 完全なバリデーションロジック（見た目の確認ができれば可）
- パフォーマンス最適化
- エッジケースの完全な対応

## 3. プロトタイプの作成方法

### 3.1. ツール

**HTML/CSS/JavaScript** を使用してプロトタイプを作成する。

- シンプルなHTML/CSS/JSで実装
- 画面全体のフローを表現
- インタラクションはJavaScriptで制御

### 3.2. 作成タイミング

`ui_design.md` 作成後、**PdMレビュー完了後**にプロトタイプを作成する。

```
1. [Des] ui_design.md 作成
2. [PdM] ui_design.md レビュー（要件解釈の確認）
3. [Des] プロトタイプ作成 ← ここ
4. [ユーザー/Helper] プロトタイプレビュー（UX確認）
5. [Des] フィードバック反映
6. [Eng] クロスレビュー
```

### 3.3. 成果物の配置

プロトタイプは以下の場所に配置する：

- **プロトタイプファイル**: `docs/features/{feature_name}/mockups/`
  - `{feature_name}.html` - HTMLファイル
  - `{feature_name}.css` - CSSファイル
  - `{feature_name}.js` - JavaScriptファイル（必要に応じて）
- **プロトタイプドキュメント**: `docs/features/{feature_name}/prototype.md`（任意、必要に応じて）

## 4. プロトタイプの構成

### 4.1. HTML構造

各画面（ページ）ごとにHTMLセクションを作成する：

```html
<!-- docs/features/{feature_name}/mockups/{feature_name}.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{機能名} プロトタイプ</title>
  <link rel="stylesheet" href="{feature_name}.css">
</head>
<body>
  <!-- 状態1: 正常系 -->
  <section class="prototype-section">
    <h2>状態1: 正常系</h2>
    <!-- コンテンツ -->
  </section>

  <!-- 状態2: エラー系 -->
  <section class="prototype-section">
    <h2>状態2: エラー系</h2>
    <!-- コンテンツ -->
  </section>
</body>
</html>
```

### 4.2. フロー表現

画面遷移は、以下のいずれかの方法で表現する：

1. **複数のセクションで表現**: 各画面を別セクションとして作成し、遷移先をコメントで明記
2. **インタラクティブな遷移**: JavaScriptを使用してクリックで次の状態に遷移
3. **状態管理**: JavaScriptで状態を管理し、ボタンクリックで状態遷移

### 4.3. モックデータ

実際のAPIは使用せず、モックデータを使用する：

```javascript
// モックデータの例
const mockDailyReports = [
  { id: 1, date: "2025-01-15", content: "サンプル日報1" },
  { id: 2, date: "2025-01-14", content: "サンプル日報2" },
];
```

## 5. レビュープロセス

### 5.1. PdMレビュー（ui_design.md）

PdMは `ui_design.md` をレビューし、以下をチェックする：

- [ ] `prd.md` の要件が正しく解釈されているか
- [ ] ユーザーストーリーの流れが実現されているか
- [ ] エラーハンドリングが適切に設計されているか
- [ ] 画面遷移が自然か
- [ ] メッセージ仕様が正しく反映されているか

**注意**: PdMは `ui_design.md` を主にレビューし、プロトタイプは参照程度とする。

### 5.2. 人間（human）レビュー（プロトタイプ）

人間（human）がプロトタイプをレビューし、以下を判断・支援する：

- [ ] UIUXの観点から判断を支援する
- [ ] 要件面での判断を支援する（DesやPdMの判断に迷いがある場合）
- [ ] 実際の操作感は自然か
- [ ] 使いやすさに問題はないか
- [ ] 視覚的なフィードバックは適切か
- [ ] 操作の流れに迷いがないか
- [ ] 改善すべき点はないか

**役割**: 人間（human）は最終判断者として、プロトタイプを基にUIUXや要件面での判断を手助けする。DesやPdMが判断に迷った際の最終的な判断を下す。

### 5.3. フィードバック反映

人間（human）からのフィードバックは、以下に反映する：

1. **プロトタイプの修正**: HTML/CSS/JSファイルを更新
2. **ui_design.md の更新**: 必要に応じて設計ドキュメントも更新
3. **prd.md の更新**: 要件の見直しが必要な場合は更新（人間（human）の判断に基づく）

**注意**: フィードバック反映後、必要に応じてドキュメントのステータスを **Pending** に戻し、再度レビューを実施する。

### 5.4. 承認基準

プロトタイプ作成は必須であり、humanレビューを実施する。

主要な画面・状態が表現され、画面遷移の流れが確認できれば十分。

## 6. 実装への移行

プロトタイプレビュー完了後、以下を実施：

1. **実装開始前の最終確認**: すべての設計ドキュメントが **Approved** ステータスであることを確認
2. **実装開始**: `ui_design.md` とプロトタイプをベースに実装を進める

プロトタイプのコードは実装のベースとして活用できるが、以下を考慮：

- プロトタイプは「見た目」と「挙動」の確認が目的
- 実装時は適切なコンポーネント設計、状態管理、エラーハンドリングを追加
- `ui_design.md` が実装の主な参照ドキュメント

## 7. 品質基準

プロトタイプは以下の品質基準を満たすこと：

| 項目               | 基準                                                               |
| ------------------ | ------------------------------------------------------------------ |
| **視覚的な完成度** | 実際の見た目が再現されている（レイアウト、カラー、タイポグラフィ） |
| **状態の網羅性**   | 正常系・エラー・ローディング等の主要な状態が表現されている         |
| **フローの明確性** | 画面遷移の流れが確認できる                                         |
| **要件充足度**     | `prd.md` の主要な要件が表現されている                              |

## 8. 注意事項

### 8.1. プロトタイプと実装の違い

プロトタイプは「確認のためのもの」であり、実装の完全な代替ではない：

- プロトタイプ: 見た目と挙動の確認
- 実装: 実際の機能として動作するコード

### 8.2. 過度な実装を避ける

プロトタイプでは以下は不要：

- 完全なバリデーションロジック（見た目の確認ができれば可）
- エッジケースの完全な対応
- パフォーマンス最適化
- アクセシビリティの完全な実装（基本的な対応は推奨）

### 8.3. デザイントークンの使用

プロトタイプでも実装と同様に、デザイントークン（CSS変数）を使用する：

```scss
// ✅ OK: デザイントークンを使用
.button {
  background-color: var(--color-primary-500);
}

// ❌ NG: ハードコードされた値
.button {
  background-color: #6366f1;
}
```

## 9. 関連ドキュメント

- `docs/rules/jobs/des.md` - Desロールの詳細ルール
- `docs/rules/jobs/pdm.md` - PdMロールの詳細ルール
- `docs/rules/development-flow.md` - 開発フロー
- `.cursor/rules/design_system_rules.mdc` - デザインシステムルール（実体はStorybook参照）
