# Auth機能 振り返り（Retrospective）

**実施日**: 2025-12-05  
**参加ロール**: PdM, Eng, Des  
**対象機能**: ユーザー認証（サインアップ/ログイン/ログアウト）

---

## 1. Keep（良かった点・継続すべきこと）

### プロセス面

- **ドキュメントファースト**: PRD → Tech Spec → UI Design の順で設計し、実装前に合意形成ができた
- **クロスレビュー**: Eng/Des間で tech_spec.md と ui_design.md の整合性を確認するプロセスが機能した
- **リサーチ活用**: des_research.md / tech_research.md で類似事例を調査し、根拠のある設計ができた

### 技術面

- **モノレポ構成**: FE(Angular) / BE(Express) / shared を npm workspaces で統合管理し、開発効率が向上した
- **テストカバレッジ100%**: 全コードにテストを書き、品質を担保できた
- **コンポーネント化**: InputField / Button / AlertBanner を汎用コンポーネントとして抽出し、再利用性を確保した
- **デザイントークン**: カラーをCSS変数で管理し、テーマ変更に対応できる設計にした

### UI/UX面

- **シンプルなフォームUI**: 余白を十分に取り、入力しやすいデザインを実現した
- **バリデーションフィードバック**: エラーメッセージを即座に表示し、ユーザーの迷いを軽減した
- **モバイルファースト**: レスポンシブ対応で様々なデバイスに対応した

---

## 2. Problem（改善点・課題）

### プロセス面

- **TDD未実践**: 初期実装時にテストを後回しにしてしまった。Red-Green TDDを実践できていなかった
- **振り返りの遅れ**: 機能完了直後に振り返りを行わなかった（今回、まとめて実施）

### 技術面

- **SSR互換性問題**: 最初にSSRを有効化したため、localStorageアクセスでエラーが発生した
- **RouterLink テスト設定**: RouterTestingModule の設定で苦労した（ActivatedRouteのモック問題）
- **ESLint設定の複雑さ**: モノレポでのFlat Config設定に時間がかかった

### UI/UX面

- **ホームページが仮実装**: 認証後のホームページが「Coming Soon」状態で、実際の機能がない
- **パスワードリセット未実装**: PRDに記載はないが、実運用では必要な機能

---

## 3. Try（次に試すアクション）

### プロセス面

1. **TDD徹底**: 次の機能（daily-report-input）からはRed-Green TDDを必ず実践する
2. **機能完了時の即時振り返り**: PRマージ直後に振り返りを実施するフローを確立する

### 技術面

1. **SSRは必要になってから有効化**: 初期はCSRで開発し、SEO要件が出てからSSR対応を検討する
2. **テスト設定のテンプレート化**: RouterTestingModule等のよく使う設定をスニペット化する
3. **ESLint設定のドキュメント整備**: 設定変更時のトラブルシューティングガイドを追加する

### UI/UX面

1. **ホームページの実装**: daily-report-input機能と合わせて、ダッシュボードUIを実装する
2. **パスワードリセット**: Phase 2でパスワードリセット機能を追加する

---

## 4. Learnings（学び・知見）

### 技術的な学び

- **Angular Standalone Components**: NgModule不要でコンポーネントが独立し、テストしやすくなった
- **ControlValueAccessor**: カスタムフォームコントロールをReactive Formsと統合する方法を習得した
- **ESLint Flat Config**: `.eslintrc` から `eslint.config.js` への移行パターンを理解した
- **Karma Coverage設定**: `karma.conf.cjs` で100%閾値を設定し、品質を自動保証する方法を習得した

### プロセスの学び

- **ドキュメントの価値**: 設計ドキュメントがあることで、実装時の迷いが大幅に減少した
- **クロスレビューの重要性**: Eng/Des間の認識齟齬を早期に発見・解消できた
- **振り返りの習慣化**: 振り返りを後回しにすると、記憶が薄れて学びが減る

### チーム連携の学び

- **ロール間のコミュニケーション**: 各ロールが専門性を発揮しつつ、共通認識を持つことが重要
- **憲法（constitution.mdc）の活用**: ルールを明文化することで、一貫した行動ができた

---

## 5. 定量データ

| 項目                   | 値                                                          |
| :--------------------- | :---------------------------------------------------------- |
| 実装期間               | 2025-12-04 〜 2025-12-05                                    |
| コミット数             | 約20コミット                                                |
| テストケース数         | 140件                                                       |
| テストカバレッジ       | 100%                                                        |
| コンポーネント数（FE） | 5（LoginPage, SignupPage, InputField, Button, AlertBanner） |
| API エンドポイント数   | 4（signup, login, logout, me）                              |

---

## 6. 次の機能への引き継ぎ事項

- [ ] daily-report-input 機能開発時はTDDを徹底する
- [ ] 汎用コンポーネント（InputField, Button, AlertBanner）を活用する
- [ ] デザイントークン（CSS変数）を継続使用する
- [ ] 振り返りは機能完了直後に実施する

---

_各ロールの詳細な振り返りは `pdm.md`, `eng.md`, `des.md` を参照_
