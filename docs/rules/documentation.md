# ドキュメント作成ルール

ドキュメントを作成・更新する際の必須ルールを定義します。

---

## 1. DRY原則（Don't Repeat Yourself）

**同じ情報を複数の場所に書かない。**

### ルール

- 情報は1箇所にのみ記述し、他の場所からは参照する
- 重複を発見した場合は、1箇所に集約して他は参照リンクに置き換える

### 参照の書き方

```markdown
> 詳細は `docs/path/to/file.md` の「セクション名」を参照
```

### 例

❌ 悪い例：同じ内容を複数ファイルに記述

```markdown
<!-- development-flow.md -->

カバレッジ閾値は100%を維持すること...（詳細な説明）

<!-- test_rules.md -->

カバレッジ閾値は100%を維持すること...（同じ詳細な説明）
```

✅ 良い例：1箇所に集約して参照

```markdown
<!-- development-flow.md -->

> カバレッジ100%は必須。詳細は `docs/general/test_rules.md` を参照

<!-- test_rules.md -->

## カバレッジ100%必須ルール

（ここに詳細を記述）
```

---

## 2. 目的に応じたファイル分離

**1ファイル1目的。異なる目的の情報は別ファイルに分ける。**

### ファイル分離の指針

| 目的         | 配置先                     |
| ------------ | -------------------------- |
| ルール・原則 | `docs/rules/`              |
| 実装ガイド   | `docs/general/`            |
| 機能仕様     | `docs/features/{feature}/` |
| 振り返り     | `docs/retro/{feature}/`    |

### 例

❌ 悪い例：1ファイルに複数の目的

```markdown
<!-- test_rules.md -->

# テストルール

...（ルール）

## テストの書き方サンプル

...（実装ガイド）

## 認証機能のテスト設計

...（機能仕様）
```

✅ 良い例：目的ごとに分離

```
docs/
├── rules/test-policy.md          # テストに関するルール・原則
├── general/test_rules.md         # テストの書き方ガイド
└── features/auth/tech_spec.md    # 認証機能のテスト設計
```

---

## 3. ディレクトリ構造の遵守

**`docs/rules/ground.md` で定義されたディレクトリ構造に従う。**

### 構造

```
docs/
├── rules/                    # ルール定義（変更頻度：低）
│   ├── ground.md             # 憲法
│   ├── development-flow.md   # 開発フロー
│   ├── documentation.md      # ドキュメント作成ルール（本ファイル）
│   └── jobs/                 # ロール別ルール
├── general/                  # 全体共通（変更頻度：中）
├── features/{feature_name}/  # 機能別（変更頻度：高）
└── retro/{feature_name}/     # 振り返り
```

### 配置判断フロー

1. **ルール・原則か？** → `docs/rules/`
2. **全機能共通か？** → `docs/general/`
3. **特定機能に関連か？** → `docs/features/{feature}/`
4. **振り返りか？** → `docs/retro/{feature}/`

---

## 4. ドキュメントステータス管理

機能開発の設計ドキュメント（`prd.md`, `tech_spec.md`, `ui_design.md`）は、ドキュメント先頭にステータスを記載する。

### ステータスの種類

- **Pending**: レビュー中または修正中
- **Approved**: レビュー完了、実装開始可能

### 記載方法

```markdown
# 機能名 PRD

**バージョン**: v1  
**作成日**: 2025-01-XX  
**作成者**: PdM  
**ステータス**: Pending / Approved  
**承認日**: 2025-01-XX（Approvedの場合）  
**承認者**: レビュー実施者（Approvedの場合）

---
```

### ステータス更新ルール

- **Pending → Approved**: すべてのレビューが完了し、フィードバックが反映された後
- **Approved → Pending**: 仕様変更が必要になった場合

### 実装開始条件

**重要**: すべての設計ドキュメント（`prd.md`, `tech_spec.md`, `ui_design.md`）が **Approved** ステータスにならない限り、実装を開始してはならない。

→ 詳細は `docs/rules/development-flow.md` を参照

---

## 5. チェックリスト

ドキュメント作成・更新時に確認：

- [ ] 同じ情報が他のファイルに存在しないか確認した
- [ ] 重複がある場合は1箇所に集約し、他は参照に変更した
- [ ] ファイルの目的が単一であることを確認した
- [ ] 適切なディレクトリに配置した
- [ ] 関連ドキュメントへのリンクを追加した
- [ ] 設計ドキュメントの場合はステータス（Pending/Approved）を記載した
