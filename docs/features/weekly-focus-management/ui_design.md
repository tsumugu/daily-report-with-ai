# 週次フォーカス管理機能 UI/UX設計書（UI Design）

**バージョン**: Phase 2 v2  
**作成日**: 2025-12-06  
**作成者**: Des  
**ステータス**: Draft  
**承認日**: -  
**承認者**: -

---

## 1. 概要

週次フォーカス管理機能のUI/UX設計方針を定義する。  
フォロー項目一覧から週次フォーカスを追加し、ホーム画面で今週のフォーカスを表示・管理する画面・コンポーネントの設計を記載する。

---

## 2. 画面構成

### 2.1 フォロー項目一覧画面（拡張）

- ヘッダー：画面タイトル「フォロー項目」、戻るボタン
- フィルタ部：ステータスフィルタ、種別フィルタ
- リスト部：フォロー項目カード一覧（「フォーカスに追加」ボタン追加）
- フッター：ページング（「もっと見る」ボタン）

### 2.2 ホーム画面（既存）

- 週次フォーカスセクション：今週のフォーカス一覧表示、削除ボタン

---

## 3. UIコンポーネント

### 3.1 フォロー項目カード（拡張）

| 項目               | コンポーネント     | 備考                                                                          |
| :----------------- | :----------------- | :---------------------------------------------------------------------------- |
| フォロー項目カード | Card               | 既存のカードに「フォーカスに追加」ボタンを追加                                |
| フォーカスに追加ボタン | Button (Secondary) | 「フォーカスに追加」、既にフォーカスに設定されている場合は非表示または無効化 |
| フォーカス設定済みバッジ | Badge             | 既にフォーカスに設定されている項目に「今週のフォーカス」バッジを表示（新規追加） |
| ローディング表示   | Spinner            | フォーカス追加中のローディング表示（新規追加）                                |

### 3.2 週次フォーカスセクション（既存）

| 項目             | コンポーネント     | 備考                                  |
| :--------------- | :----------------- | :------------------------------------ |
| 追加ボタン       | Button (Secondary) | 「＋ フォーカスを追加」               |
| フォーカスカード | Card               | よかったこと/改善点の情報、削除ボタン |
| 空状態メッセージ | AlertBanner        | フォーカス未設定時                    |

### 3.3 共通コンポーネント

| 項目         | コンポーネント | 備考                           |
| :----------- | :------------- | :----------------------------- |
| トースト通知 | Toast          | 追加/削除成功時のフィードバック |

---

## 4. レイアウト方針

- モバイルファースト設計
- フォロー項目カードのアクションボタンは右側に配置
- 「フォーカスに追加」ボタンは「フォローアップ」ボタンの下に配置

---

## 5. インタラクション

### 5.1 フォロー項目一覧画面

- 「フォーカスに追加」ボタン押下時：ローディング表示（ボタンを無効化） → 週次フォーカスを追加 → トースト通知 → カードを更新（ボタンを非表示、バッジを表示）
- 既にフォーカスに設定されている項目：ボタンを非表示し、「今週のフォーカス」バッジを表示
- 週次フォーカスが5件に達している場合：追加ボタンを無効化または警告表示（推奨：無効化）

### 5.2 ホーム画面

- 削除ボタン押下時：週次フォーカスを削除 → トースト通知 → リストを更新
- 追加ボタン押下時：フォロー項目一覧画面へ遷移
- **フォーカス追加後、ホーム画面に戻った時に週次フォーカスセクションを自動更新**
- **フォロー項目削除時、週次フォーカスも自動削除されることをトースト通知で表示**

---

## 6. デザイントークン

### 6.1 カラー

既存のデザインシステムを利用。

| 用途              | トークン              | 説明 |
| :---------------- | :-------------------- | :--- |
| フォーカス追加ボタン | `--color-primary-500` | 青   |
| 削除ボタン        | `--color-error-500`   | 赤   |
| フォーカス設定済みバッジ | `--color-success` | 緑（既にフォーカスに設定されていることを示す） |

### 6.2 スペーシング

- カード内のボタン間の余白: `0.5rem` (8px)
- カードとカード間の余白: `1rem` (16px)

---

## 7. ワイヤーフレーム

### 7.1 フォロー項目カード（拡張）

#### 通常状態
```
┌──────────────────────────┐
│ ✨ よかったこと           │
│ 内容: チーム会議で...     │
│ [進行中] 成功: 1回       │
│ 📅 2025-12-05            │
│                          │
│ [ フォローアップ ]        │
│ [ フォーカスに追加 ]      │ ← 新規追加
│ [ 日報を見る ]            │
└──────────────────────────┘
```

#### フォーカス設定済み状態
```
┌──────────────────────────┐
│ ✨ よかったこと           │
│ 内容: チーム会議で...     │
│ [進行中] 成功: 1回       │
│ [今週のフォーカス] 🎯    │ ← 新規追加（バッジ）
│ 📅 2025-12-05            │
│                          │
│ [ フォローアップ ]        │
│ [ 日報を見る ]            │
│ （フォーカスに追加ボタンは非表示）│
└──────────────────────────┘
```

#### ローディング状態
```
┌──────────────────────────┐
│ ✨ よかったこと           │
│ 内容: チーム会議で...     │
│ [進行中] 成功: 1回       │
│ 📅 2025-12-05            │
│                          │
│ [ フォローアップ ]        │
│ [ 追加中... ⏳ ]          │ ← ローディング表示
│ [ 日報を見る ]            │
└──────────────────────────┘
```

### 7.2 週次フォーカスセクション（既存）

```
┌──────────────────────────┐
│ 今週のフォーカス  [＋追加] │
├──────────────────────────┤
│ ┌────────────────────┐   │
│ │ ✨ よかったこと     │   │
│ │ 内容: チーム会議で...│   │
│ │ [進行中] 成功: 1回 │   │
│ │ [削除]             │   │
│ └────────────────────┘   │
└──────────────────────────┘
```

---

## 8. 状態遷移

### 8.1 フォーカス追加フロー

1. フォロー項目一覧画面で「フォーカスに追加」ボタンを押下
2. **ローディング表示（ボタンを無効化、スピナー表示）**
3. API呼び出し
4. 成功時：トースト通知「今週のフォーカスに追加しました」→ カードを更新（ボタンを非表示、「今週のフォーカス」バッジを表示）
5. エラー時：トースト通知でエラーメッセージ表示 → ボタンを再有効化

### 8.3 ホーム画面へのフィードバック

- **フォーカス追加後、ホーム画面に戻った時に週次フォーカスセクションを自動更新**
- 週次フォーカスセクションが最新の状態で表示されることを保証

### 8.4 フォロー項目削除時の通知

- **フォロー項目削除時、週次フォーカスも自動削除されることをトースト通知で表示**
- メッセージ例：「フォロー項目を削除しました。関連する週次フォーカスも削除されました」

### 8.2 エラーケース

- 最大5件制限：トースト通知「今週のフォーカスは最大5件まで設定できます」
- 重複エラー：トースト通知「この項目は既に今週のフォーカスに設定されています」

---

## 9. アクセシビリティ

- ボタンに適切な `aria-label` を設定
- キーボード操作対応（Tab、Enter）
- スクリーンリーダー対応

---

## 10. レスポンシブ対応

- モバイル：ボタンを縦に配置
- PC：ボタンを横に配置

---

## 11. 実装ファイル

### フロントエンド

- `apps/web/src/app/features/followup/components/followup-card/followup-card.component.html` - 拡張
- `apps/web/src/app/features/followup/components/followup-card/followup-card.component.scss` - 拡張
- `apps/web/src/app/shared/components/weekly-focus-section/weekly-focus-section.component.html` - 既存（利用）

---

## 12. 将来拡張性

### 12.1 週次フォーカスカードからの遷移（Phase 3で検討）

- 週次フォーカスカードからフォローアップ入力画面へ遷移できるボタンを追加（Phase 3で検討）
- 現時点では週次フォーカスカードは表示のみ

## 13. 関連ドキュメント

| ドキュメント                              | 説明                         |
| :---------------------------------------- | :--------------------------- |
| `docs/features/weekly-focus-management/prd.md` | 週次フォーカス管理機能のPRD |
| `docs/features/followup-management/ui_design.md` | フォローアップ管理機能のUI設計（既存コンポーネント） |
| `docs/features/weekly-focus-management/helper_review.md` | Helperレビュー |

---

_本UI Designは Draft ステータスです。PdM/Eng とのクロスレビュー後に承認予定です。_

