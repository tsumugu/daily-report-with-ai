# フォローアップ動作改善 クロスレビュー

**実施日**: 2025-12-10  
**参加ロール**: Eng, Des  
**対象ドキュメント**: Tech Spec, UI Design

---

## 1. UI設計 ↔ Tech Spec 整合性チェック

### ✅ 整合している項目

| 項目                      | UI Design                             | Tech Spec                         | 状態 |
| :------------------------ | :------------------------------------ | :-------------------------------- | :--- |
| エピソード/アクション追加 | 日付入力（必須）、メモ入力（500文字） | APIで日付必須、メモ500文字制限    | ✅   |
| エピソード/アクション削除 | 削除ボタンクリックで即座に削除        | DELETE API定義済み                | ✅   |
| ステータス自動判定        | 登録数に応じてステータス表示更新      | エピソード/アクション数で自動判定 | ✅   |
| エピソード/アクション一覧 | 一覧表示                              | GET APIで一覧取得可能             | ✅   |
| 週次フォーカスカード      | フォローアップボタン追加              | フロントエンド実装として定義      | ✅   |
| エラーハンドリング        | バリデーションエラー、APIエラー       | エラーレスポンス定義済み          | ✅   |

### ⚠️ 要確認・要調整項目

| 項目                           | UI Design                      | Tech Spec                                | 課題                                  | 対応                                    |
| :----------------------------- | :----------------------------- | :--------------------------------------- | :------------------------------------ | :-------------------------------------- |
| フォローアップ入力のUI形式     | 「フォローアップ入力モーダル」 | 「フォローアップ入力画面（ページ遷移）」 | UI形式が不一致                        | **UI設計を確認し、ページ遷移に統一**    |
| 週次フォーカスカードからの遷移 | 「フォローアップ入力モーダル」 | 「フォローアップ入力画面にページ遷移」   | UI形式が不一致                        | **UI設計を確認し、ページ遷移に統一**    |
| ステータス表示の形式           | 「進行中 2/3件」形式           | ステータスと登録数の表示                 | APIレスポンスに登録数が含まれるか確認 | **APIレスポンスに登録数を含めるか確認** |
| トースト通知のタイミング       | ステータス変更時にトースト通知 | ステータス自動更新時に通知               | フロントエンド側で実装が必要          | **フロントエンド実装時に考慮**          |

---

## 2. API ↔ UI 整合性チェック

### 2.1 エピソード/アクション追加

**UI要件**:

- 日付入力（必須）
- メモ入力（最大500文字、文字数カウンター付き）

**API提供**: ✅ 適切

- `POST /api/good-points/:id/followups` - 日付必須、メモ500文字制限
- `POST /api/improvements/:id/followups` - 日付必須、メモ500文字制限

**整合性**: ✅ 整合している

### 2.2 エピソード/アクション削除

**UI要件**:

- 削除ボタンクリックで即座に削除

**API提供**: ✅ 適切

- `DELETE /api/good-points/:id/followups/:followupId`
- `DELETE /api/improvements/:id/followups/:followupId`

**整合性**: ✅ 整合している

### 2.3 エピソード/アクション一覧取得

**UI要件**:

- エピソード/アクション一覧表示
- ステータス表示（例: 「進行中 2/3件」）

**API提供**: ✅ 適切

- `GET /api/good-points/:id/followups` - エピソード一覧取得
- `GET /api/improvements/:id/followups` - アクション一覧取得

**整合性**: ⚠️ 要確認

- APIレスポンスに登録数（エピソード数/アクション数）が含まれていない
- UIで「進行中 2/3件」形式で表示するには、登録数が必要

**対応**:

- フロントエンド側でエピソード/アクション数をカウントする
- または、APIレスポンスに登録数を含める（推奨）

### 2.4 ステータス自動更新

**UI要件**:

- エピソード/アクション追加時、ステータスを自動更新
- ステータス変更時、トースト通知を表示

**API提供**: ✅ 適切

- エピソード/アクション追加時、自動的にステータスを更新

**整合性**: ✅ 整合している

- フロントエンド側でトースト通知を実装する必要がある

---

## 3. データ構造の整合性

### 3.1 エピソード/アクション情報

**UI要件**:

- 再現日/完了日、メモ、削除ボタン

**API提供**: ✅ 適切

- `date`: 再現日/完了日
- `memo`: 再現メモ/進捗メモ
- `id`: 削除時に使用

**整合性**: ✅ 整合している

### 3.2 ステータス情報

**UI要件**:

- ステータス表示（例: 「進行中 2/3件」）
- ステータスバッジ

**API提供**: ⚠️ 要確認

- `GET /api/good-points/:id` または `GET /api/improvements/:id` でステータスを取得可能
- 登録数は別途カウントが必要

**整合性**: ⚠️ 要確認

- 登録数を取得する方法を明確化する必要がある

**対応**:

- エピソード/アクション一覧取得APIのレスポンスに、登録数を含める（推奨）
- または、フロントエンド側でエピソード/アクション数をカウントする

---

## 4. 画面遷移の整合性

### 4.1 フォローアップ入力画面

**UI設計**: 「フォローアップ入力モーダル」と記載

**Tech Spec**: 「フォローアップ入力画面（ページ遷移）」と記載

**課題**: UI形式が不一致

**対応**:

- UI設計を確認し、ページ遷移に統一する（tech_specに合わせる）
- または、モーダル形式に統一する（UI設計に合わせる）

**推奨**: ページ遷移に統一（tech_specに合わせる）

### 4.2 週次フォーカスカードからの遷移

**UI設計**: 「フォローアップ入力モーダル」を開く

**Tech Spec**: 「フォローアップ入力画面にページ遷移」

**課題**: UI形式が不一致

**対応**:

- UI設計を確認し、ページ遷移に統一する（tech_specに合わせる）

---

## 5. 総合評価

### 5.1 整合性の評価

- ✅ **API設計**: UI要件を満たすAPIが適切に定義されている
- ✅ **データ構造**: UIで必要なデータがAPIで提供されている
- ⚠️ **UI形式**: フォローアップ入力のUI形式（モーダル/ページ遷移）が不一致
- ⚠️ **登録数表示**: ステータス表示に必要な登録数の取得方法が不明確

### 5.2 推奨事項

1. **UI形式の統一**: フォローアップ入力はページ遷移に統一する（tech_specに合わせる）
2. **登録数の取得**: エピソード/アクション一覧取得APIのレスポンスに、登録数を含める
3. **トースト通知**: フロントエンド実装時に、ステータス変更時のトースト通知を実装する

---

## 6. 承認

**レビュー結果**: ✅ **承認（条件付き）**

**条件**:

- UI設計を確認し、フォローアップ入力のUI形式をページ遷移に統一すること
- エピソード/アクション一覧取得APIのレスポンスに、登録数を含めること

**承認日**: 2025-12-10  
**承認者**: Eng, Des

---

_本レビューは Eng/Des 間のクロスレビューです。フィードバックを `tech_spec.md` と `ui_design.md` に反映してください。_
