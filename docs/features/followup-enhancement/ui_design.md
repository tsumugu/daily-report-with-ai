# フォローアップ動作改善 UI/UX設計書（UI Design）

**バージョン**: Phase 2 v2  
**作成日**: 2025-12-10  
**作成者**: Des  
**ステータス**: Pending  
**承認日**: -  
**承認者**: -

---

## 1. 概要

フォローアップ動作改善機能のUI/UX設計方針を定義する。  
エピソード/アクションの複数登録機能、ステータス自動判定機能、週次フォーカスカードへのフォローアップボタン追加の設計を記載する。

---

## 2. 画面構成

### 2.1 フォローアップ入力モーダル（拡張）

- ヘッダー：モーダルタイトル、閉じるボタン
- エピソード/アクション一覧セクション：登録済みエピソード/アクションの一覧表示
- エピソード/アクション追加フォーム：新規登録用フォーム
- ステータス表示：登録数に基づく自動判定ステータス

### 2.2 週次フォーカスカード（拡張）

- ヘッダー：種別アイコン・ラベル、削除ボタン
- コンテンツ：内容、ステータスバッジ、成功回数
- フッター：日付、フォローアップボタン、日報リンク

---

## 3. UIコンポーネント

### 3.1 エピソード/アクション一覧

| 項目                        | コンポーネント | 備考                                         |
| :-------------------------- | :------------- | :------------------------------------------- |
| エピソード/アクションカード | Card           | 再現日/完了日、メモ、削除ボタン              |
| ステータス表示              | Badge + Text   | 現在のステータスと登録数（例: 進行中 2/3件） |
| 追加ボタン                  | Button         | 「エピソードを追加」/「アクションを追加」    |
| 空状態                      | Message        | エピソード/アクションが0件の場合             |

### 3.2 エピソード/アクション入力フォーム

| 項目             | コンポーネント | 備考                          |
| :--------------- | :------------- | :---------------------------- |
| 日付入力         | DateField      | 再現日/完了日（必須）         |
| メモ入力         | TextareaField  | 最大500文字、文字数カウンター |
| 保存ボタン       | Button         | 「追加」                      |
| キャンセルボタン | Button         | 「キャンセル」                |

### 3.3 週次フォーカスカード（拡張）

| 項目                 | コンポーネント   | 備考                                                             |
| :------------------- | :--------------- | :--------------------------------------------------------------- |
| フォローアップボタン | Button (Outline) | フォロー項目カードと同じスタイル（variant="outline", size="sm"） |
| カードレイアウト     | Card             | フォロー項目カードと統一されたデザイン                           |

---

## 4. レイアウト方針

### 4.1 エピソード/アクション一覧

- 縦方向にリスト表示
- 各エピソード/アクションはカード形式で表示
- 削除ボタンは右側に配置
- 追加ボタンは一覧の下に配置（破線ボーダーで視覚的に区別）

### 4.2 週次フォーカスカード

- フォロー項目カードと同じレイアウト構造
- フッターにアクションエリアを追加（日付とアクションボタンを横並び）
- フォローアップボタンは「日報を見る」リンクの左側に配置

---

## 5. インタラクション

### 5.1 エピソード/アクション追加

- 「エピソードを追加」/「アクションを追加」ボタンクリック時：入力フォームを表示
- フォーム入力後「追加」ボタンクリック時：エピソード/アクションを一覧に追加、ステータスを自動更新
- キャンセルボタンクリック時：フォームを非表示

### 5.2 エピソード/アクション削除

- 削除ボタンクリック時：確認なしで即座に削除、ステータスを自動再計算
- 削除後、閾値を下回った場合は「進行中」に戻る

### 5.3 ステータス自動更新

- エピソード/アクション追加時：登録数に応じてステータスを自動更新
- ステータス変更時：トースト通知でユーザーに通知（例: 「エピソードが3件以上になりました。ステータスが「再現成功」に更新されました」）

### 5.4 週次フォーカスカードからのフォローアップ入力

- 「フォローアップ」ボタンクリック時：フォローアップ入力モーダルを開く
- モーダル内での動作はフォロー項目一覧画面と同様
- 入力後、週次フォーカスカードのステータス表示が自動更新

---

## 6. デザイントークン

### 6.1 カラー

| 用途                      | トークン              | 説明 |
| :------------------------ | :-------------------- | :--- |
| ステータス: 進行中        | `--color-primary-500` | 青   |
| ステータス: 再現成功/完了 | `--color-success`     | 緑   |
| 削除ボタン（ホバー）      | `--color-error`       | 赤   |
| 追加ボタン（ホバー）      | `--color-primary-500` | 青   |

### 6.2 スペーシング

- エピソード/アクションカード間の余白: `0.5rem` (8px)
- エピソードセクションとフォーム間の余白: `1rem` (16px)
- カード内のパディング: `1rem` (16px)

---

## 7. ワイヤーフレーム

### 7.1 フォローアップ入力モーダル（エピソード一覧表示時）

```
┌─────────────────────────────────────┐
│ よかったことのフォローアップ      ×  │
├─────────────────────────────────────┤
│ 再現エピソード          [進行中 2/3件]│
│                                      │
│ ┌─────────────────────────────────┐ │
│ │ 再現日: 2025-12-08          [×] │ │
│ │ チーム会議で積極的に発言できた...│ │
│ └─────────────────────────────────┘ │
│                                      │
│ ┌─────────────────────────────────┐ │
│ │ 再現日: 2025-12-10          [×] │ │
│ │ 1on1で上司に良いフィードバック...│ │
│ └─────────────────────────────────┘ │
│                                      │
│ ┌─────────────────────────────────┐ │
│ │    ＋ エピソードを追加          │ │
│ └─────────────────────────────────┘ │
│                                      │
│ [キャンセル]              [保存する] │
└─────────────────────────────────────┘
```

### 7.2 週次フォーカスカード（フォローアップボタン追加後）

```
┌─────────────────────────────────────┐
│ ❤️ よかったこと                  ×  │
│                                      │
│ チーム会議で積極的に発言できた...   │
│ [進行中] 成功: 2回                  │
│ ─────────────────────────────────── │
│ 📅 2025-12-05                       │
│    [フォローアップ] 日報を見る →    │
└─────────────────────────────────────┘
```

---

## 8. HTML/CSSモック

### 8.1 エピソード一覧モック

詳細なHTML/CSSモックは以下のファイルを参照：

- [エピソード一覧HTML](./mockups/episode-list.html)
- [エピソード一覧CSS](./mockups/episode-list.css)

**主な特徴**:

- エピソードカードの一覧表示
- ステータスと登録数の表示（例: 進行中 2/3件）
- エピソード追加ボタン（破線ボーダー）
- エピソード入力フォーム（日付、メモ、文字数カウンター）

### 8.2 週次フォーカスカードモック

詳細なHTML/CSSモックは以下のファイルを参照：

- [週次フォーカスカードHTML](./mockups/weekly-focus-card.html)
- [週次フォーカスカードCSS](./mockups/weekly-focus-card.css)

**主な特徴**:

- フォロー項目カードと統一されたデザイン
- フッターにフォローアップボタンを追加
- 日付とアクションボタンを横並び配置

---

## 9. 状態別の表示

### 9.1 エピソード/アクション0件

- ステータス: 「未着手」
- エピソード/アクション一覧は空状態
- 「エピソードを追加」/「アクションを追加」ボタンのみ表示

### 9.2 エピソード/アクション1件以上（閾値未満）

- ステータス: 「進行中」
- 登録数表示: 「進行中 2/3件」形式
- エピソード/アクション一覧に登録済み項目を表示

### 9.3 エピソード/アクション閾値以上

- ステータス: 「再現成功」/「完了」
- 登録数表示: 「再現成功 3/3件」形式
- トースト通知でステータス更新を通知

### 9.4 ローディング状態

- エピソード/アクション追加中は追加ボタンを無効化
- スピナー表示（オプション）

---

## 10. インタラクション詳細

### 10.1 エピソード/アクションカード

- **ホバー**: カードに影が表示される（`box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1)`）
- **削除ボタンホバー**: 背景色が赤に変わり、アイコンが白になる

### 10.2 追加ボタン

- **ホバー**: ボーダーが青に変わり、背景色が薄い青になる
- **クリック**: 入力フォームがスライドイン（またはフェードイン）

### 10.3 フォーム入力

- **フォーカス**: 入力フィールドのボーダーが青になる
- **バリデーションエラー**: ボーダーが赤になり、エラーメッセージを表示

---

## 11. アニメーション・トランジション

### 11.1 エピソード/アクション追加

- 新規追加時：フェードインアニメーション（200ms）
- ステータス更新時：バッジの色がスムーズに変化（300ms）

### 11.2 エピソード/アクション削除

- 削除時：フェードアウトアニメーション（200ms）
- 削除後：残りの項目がスムーズに上に移動（200ms）

### 11.3 フォーム表示/非表示

- フォーム表示時：スライドダウンアニメーション（300ms）
- フォーム非表示時：スライドアップアニメーション（300ms）

---

## 12. レスポンシブ対応

### 12.1 モバイル（〜768px）

- エピソード/アクションカードは全幅表示
- 削除ボタンは右端に固定
- フォームは縦方向に配置

### 12.2 タブレット・PC（768px〜）

- エピソード/アクションカードは最大幅600pxで中央配置
- フォームは2カラムレイアウト（日付とメモを横並び）を検討

---

## 13. アクセシビリティ

### 13.1 キーボード操作

- Tabキーでフォーカス移動
- Enterキーでフォーム送信
- Escapeキーでモーダル/フォームを閉じる

### 13.2 ARIA属性

- エピソード/アクションカードに`role="listitem"`を設定
- 削除ボタンに`aria-label="削除"`を設定
- ステータス表示に`aria-live="polite"`を設定（動的更新時）

---

## 14. 使用するデザイントークン

### 14.1 カラー

- プライマリ: `var(--color-primary-500)`
- 成功: `var(--color-success)`
- エラー: `var(--color-error)`
- テキスト: `var(--color-text-primary)`, `var(--color-text-secondary)`
- 背景: `var(--color-bg-primary)`, `var(--color-bg-secondary)`
- ボーダー: `var(--color-border-default)`

### 14.2 スペーシング

- XS: `0.25rem` (4px)
- SM: `0.5rem` (8px)
- MD: `1rem` (16px)
- LG: `1.5rem` (24px)

### 14.3 タイポグラフィ

- タイトル: `1.25rem`, `font-weight: 600`
- 本文: `0.9375rem`, `line-height: 1.5`
- ラベル: `0.875rem`, `font-weight: 500`
- メタ情報: `0.875rem`, `color: var(--color-text-secondary)`

---

## 15. 週次フォーカスカードとフォロー項目カードのデザイン統一

### 15.1 共通デザイン要素

| 要素         | 仕様                                        |
| :----------- | :------------------------------------------ |
| カード構造   | ヘッダー、コンテンツ、フッターの3セクション |
| パディング   | `1rem` (16px)                               |
| ボーダー     | `1px solid var(--color-border-default)`     |
| ボーダー半径 | `0.5rem` (8px)                              |
| ホバー効果   | `box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1)`  |
| フッター     | ボーダートップ、日付とアクションを横並び    |

### 15.2 フォローアップボタン

- **スタイル**: `variant="outline"`, `size="sm"`
- **配置**: フッターのアクションエリア（日付の右側）
- **ラベル**: 「フォローアップ」
- **動作**: クリックでフォローアップ入力モーダルを開く

---

## 16. 画面遷移

```
フォロー項目一覧 / ホーム画面
  ↓ カードクリック / フォローアップボタンクリック
フォローアップ入力モーダル
  ↓ 「エピソードを追加」/「アクションを追加」ボタン
エピソード/アクション入力フォーム表示
  ↓ フォーム入力・保存
エピソード/アクション一覧に追加
  ↓ 自動判定
ステータス更新（トースト通知）
  ↓ モーダル閉じる
一覧/カード表示更新
```

---

## 17. エラーハンドリング

### 17.1 バリデーションエラー

- 日付未入力時：フィールドのボーダーを赤に、エラーメッセージを表示
- メモ500文字超過時：文字数カウンターを赤に、エラーメッセージを表示

### 17.2 APIエラー

- エピソード/アクション追加失敗時：トースト通知でエラーメッセージを表示
- 削除失敗時：トースト通知でエラーメッセージを表示

---

## 関連ドキュメント

- PRD: `docs/features/followup-enhancement/prd.md`
- Tech Spec: `docs/features/followup-enhancement/tech_spec.md`（作成予定）
- 既存UI設計: `docs/features/followup-management/ui_design.md`

---

_本UI設計書は Pending ステータスです。PdMレビュー後に承認予定です。_
