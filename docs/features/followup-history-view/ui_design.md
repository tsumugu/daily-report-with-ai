# フォローアップ履歴確認機能 UI/UX設計書（UI Design）

**バージョン**: Phase 2 v2  
**作成日**: 2025-12-06  
**作成者**: Des  
**ステータス**: Draft  
**承認日**: -  
**承認者**: -

---

## 1. 概要

フォローアップ履歴確認機能のUI/UX設計方針を定義する。  
フォローアップ入力モーダル内に履歴セクションを追加し、過去に入力したフォローアップの履歴を表示する。

---

## 2. 画面構成

### 2.1 フォローアップ入力モーダル（拡張）

- ヘッダー：モーダルタイトル（「よかったことのフォローアップ」/「改善点のフォローアップ」）、閉じるボタン
- フォーム部：ステータス選択、メモ入力、日付入力（条件付き必須）
- **履歴セクション**：過去のフォローアップ一覧（新規追加）
- フッター：キャンセルボタン、保存ボタン

---

## 3. UIコンポーネント

### 3.1 フォローアップ入力モーダル（拡張）

| 項目             | コンポーネント     | 備考                                                                                 |
| :--------------- | :----------------- | :----------------------------------------------------------------------------------- |
| モーダル         | Dialog             | オーバーレイ付きモーダル                                                             |
| ステータス選択   | Select             | よかったこと: 未着手/進行中/再現成功/再現できず<br>改善点: 未着手/進行中/完了/未達成 |
| メモ入力         | TextareaField      | 再現メモ/進捗メモ、最大500文字、文字数カウンター                                     |
| 日付入力         | DateField          | 条件付き必須（ステータスが「再現成功」「完了」の場合）                               |
| **履歴セクション** | **Section**        | **過去のフォローアップ一覧（新規追加）**                                             |
| 保存ボタン       | Button (Primary)   | 「保存する」                                                                         |
| キャンセルボタン | Button (Secondary) | 「キャンセル」                                                                       |

### 3.2 履歴項目コンポーネント（新規）

| 項目       | コンポーネント | 備考                                 |
| :--------- | :------------- | :----------------------------------- |
| ステータスバッジ | Badge          | ステータスに応じた色                 |
| メモ       | Text           | 最大500文字、長い場合は省略表示      |
| 日付       | Text           | 再現日/完了日                         |
| 作成日時   | Text           | フォローアップを入力した日時         |

### 3.3 共通コンポーネント

| 項目               | コンポーネント | 備考                                                      |
| :----------------- | :------------- | :-------------------------------------------------------- |
| ステータスバッジ   | Badge          | ステータスに応じた色（グレー/青/緑/濃い緑/オレンジ）      |
| 空状態メッセージ   | Text           | 「まだフォローアップがありません」                        |

---

## 4. レイアウト方針

- モバイルファースト設計
- 履歴セクションはフォームの下に配置
- 履歴項目は縦に並べて表示
- モーダル内でスクロール可能

---

## 5. インタラクション

### 5.1 フォローアップ入力モーダル

- モーダル表示時：自動的に履歴を取得して表示
- 履歴が0件の場合：空状態メッセージを表示
- フォローアップ保存後：履歴を再取得して更新

---

## 6. デザイントークン

### 6.1 カラー

既存のデザインシステムを利用。

| 用途              | トークン              | 説明 |
| :---------------- | :-------------------- | :--- |
| ステータス: 未着手 | `--color-gray-500`    | グレー   |
| ステータス: 進行中 | `--color-primary-500` | 青       |
| ステータス: 再現成功/完了 | `--color-success`     | 緑       |
| ステータス: 再現できず/未達成 | `--color-error-500`   | オレンジ |

### 6.2 スペーシング

- 履歴セクションとフォーム間の余白: `1.5rem` (24px)
- 履歴項目間の余白: `1rem` (16px)
- 履歴項目内の要素間の余白: `0.5rem` (8px)

---

## 7. ワイヤーフレーム

### 7.1 フォローアップ入力モーダル（拡張）

```
┌──────────────────────────┐
│ よかったことのフォローアップ  ×│
├──────────────────────────┤
│ ■ ステータス *（必須）    │
│ [進行中 ▼]               │
├──────────────────────────┤
│ ■ 再現メモ               │
│ ┌────────────────────┐   │
│ │ どのように再現したか...│   │
│ └────────────────────┘   │
│                    0/500 │
├──────────────────────────┤
│ ■ 再現日                 │
│ [2025-12-10 ▼]          │
├──────────────────────────┤
│ ─ 履歴 ─                 │ ← 新規追加
│ ┌────────────────────┐   │
│ │ [再現成功]          │   │
│ │ チーム会議で積極的に...│   │
│ │ 📅 2025-12-05      │   │
│ │ 2025-12-05 10:00   │   │
│ └────────────────────┘   │
│ ┌────────────────────┐   │
│ │ [進行中]           │   │
│ │ 再現を試みている... │   │
│ │ 2025-12-03 14:00   │   │
│ └────────────────────┘   │
├──────────────────────────┤
│ [ キャンセル ] [ 保存する ]│
└──────────────────────────┘
```

### 7.2 空状態

```
┌──────────────────────────┐
│ ─ 履歴 ─                 │
│                          │
│ まだフォローアップが      │
│ ありません               │
└──────────────────────────┘
```

---

## 8. 状態遷移

### 8.1 履歴表示フロー

1. モーダル表示時に履歴を取得
2. ローディング表示（履歴セクション内）
3. 履歴取得完了
4. 履歴が0件の場合：空状態メッセージを表示
5. 履歴が1件以上の場合：履歴項目を表示

### 8.2 履歴更新フロー

1. フォローアップ保存成功
2. 履歴を再取得
3. 履歴セクションを更新

---

## 9. アクセシビリティ

- 履歴セクションに適切な見出し（`<h3>`）を設定
- スクリーンリーダー対応
- キーボード操作対応

---

## 10. レスポンシブ対応

- モバイル：履歴項目を縦に配置
- PC：履歴項目を縦に配置（最大幅制限）

---

## 11. 実装ファイル

### フロントエンド

- `apps/web/src/app/features/followup/components/followup-input-modal/followup-input-modal.component.html` - 拡張（履歴セクション）
- `apps/web/src/app/features/followup/components/followup-input-modal/followup-input-modal.component.scss` - 拡張（履歴セクションのスタイル）
- `apps/web/src/app/features/followup/components/followup-history-item/followup-history-item.component.ts` - 新規
- `apps/web/src/app/features/followup/components/followup-history-item/followup-history-item.component.html` - 新規
- `apps/web/src/app/features/followup/components/followup-history-item/followup-history-item.component.scss` - 新規

---

## 12. 関連ドキュメント

| ドキュメント                              | 説明                         |
| :---------------------------------------- | :--------------------------- |
| `docs/features/followup-history-view/prd.md` | フォローアップ履歴確認機能のPRD |
| `docs/features/followup-management/ui_design.md` | フォローアップ管理機能のUI設計（既存コンポーネント） |

---

_本UI Designは Draft ステータスです。PdM/Eng とのクロスレビュー後に承認予定です。_

