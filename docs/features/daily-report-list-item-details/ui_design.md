# 日報一覧リストアイテム情報拡張 UI/UX設計書（UI Design）

**バージョン**: Phase 2 v2  
**作成日**: 2025-01-XX  
**作成者**: Des  
**ステータス**: Approved  
**承認日**: 2025-01-XX  
**承認者**: PdM, Helper

---

## 1. 概要

日報一覧リストアイテム情報拡張機能のUI/UX設計方針を定義する。  
日報一覧カードに、よかったこと・改善点の件数とステータス概要を追加表示する。

---

## 2. 画面構成

### 2.1 日報一覧画面（拡張）

既存の日報一覧画面を拡張し、各日報カードに追加情報を表示する。

- **ページヘッダー**: タイトル「日報一覧」、新規作成ボタン（変更なし）
- **日報カード（拡張）**:
  - 日付（変更なし）
  - よかったこと・改善点の有無アイコン（変更なし）
  - **追加**: よかったことの件数とステータス概要
  - **追加**: 改善点の件数とステータス概要
  - できごと（冒頭50文字、変更なし）

---

## 3. UIコンポーネント

### 3.1 日報カード（拡張）

| 項目                        | コンポーネント | 備考                           |
| :-------------------------- | :------------- | :----------------------------- |
| 日付                        | Time           | 既存のまま                     |
| よかったこと/改善点アイコン | Icon           | 既存のまま（ハート、ファイル） |
| **よかったことサマリー**    | **新規追加**   | 件数とステータス概要を表示     |
| **改善点サマリー**          | **新規追加**   | 件数とステータス概要を表示     |
| できごと                    | Text           | 既存のまま（冒頭50文字）       |

### 3.2 サマリー表示コンポーネント

| 項目           | コンポーネント | 備考                                |
| :------------- | :------------- | :---------------------------------- |
| 件数表示       | Text + Badge   | 「よかったこと: 2件」形式           |
| ステータス概要 | Text + Icon    | 「✓ 再現成功: 1件 ✓ 定着: 1件」形式 |

---

## 4. レイアウト方針

### 4.1 日報カードレイアウト（拡張）

```
┌─────────────────────────────────────┐
│ 📅 2025/12/10（火）  💚 📄          │ ← 既存
├─────────────────────────────────────┤
│ 💚 よかったこと: 2件                 │ ← 新規追加
│    ✓ 再現成功: 1件  ✓ 定着: 1件     │ ← 新規追加
│ 📄 改善点: 1件                       │ ← 新規追加
│    ✓ 完了: 1件                        │ ← 新規追加
│ ─────────────────────────────────── │ ← 新規追加（区切り線）
│ チーム会議で積極的に発言できた...    │ ← 既存
└─────────────────────────────────────┘
```

### 4.2 モバイル/PC対応

- **モバイル**: サマリー情報を縦方向に配置、ステータス概要は改行して表示
- **PC**: サマリー情報を横方向に配置、ステータス概要は横並びで表示

### 4.3 スペーシング

- サマリーセクションとできごとセクションの間: `1rem` (16px)
- よかったことサマリーと改善点サマリーの間: `0.5rem` (8px)
- ステータス概要内のアイテム間: `0.5rem` (8px)

---

## 5. 既存コンポーネントの使用計画

### 5.1 使用する既存コンポーネント

| コンポーネント | 配置先                   | 使用方法                                                 |
| :------------- | :----------------------- | :------------------------------------------------------- |
| Icon           | `shared/components/icon` | よかったこと（heart）、改善点（file-text）のアイコン表示 |
| Badge          | `shared/components`      | ステータス概要のバッジ表示（検討中）                     |
| Text           | 標準HTML要素             | 件数とステータス概要のテキスト表示                       |

### 5.2 新規コンポーネントの必要性

**新規コンポーネントは不要**: 既存の `report-card` コンポーネントを拡張し、サマリー情報を追加表示する。

**拡張内容**:

- `report-card.component.html`: サマリーセクションを追加
- `report-card.component.ts`: サマリーデータの表示ロジックを追加
- `report-card.component.scss`: サマリーセクションのスタイルを追加

---

## 6. インタラクション

### 6.1 表示ロジック

- **よかったこと・改善点が0件の場合**: サマリーセクションを非表示（既存のアイコン表示ロジックと同様）
- **ステータス概要が0件の場合**: ステータス概要を非表示（件数のみ表示）
- **ステータス概要が1件以上の場合**: ステータス概要を表示

### 6.2 クリック動作

- **カード全体**: 既存の動作を維持（日報詳細画面に遷移）
- **サマリー情報**: クリック不可（情報表示のみ）

---

## 7. デザイントークン

### 7.1 カラー

| 用途                 | トークン              | 説明                               |
| :------------------- | :-------------------- | :--------------------------------- |
| よかったことアイコン | `--color-primary-500` | プライマリカラー（既存）           |
| 改善点アイコン       | `--color-primary-500` | プライマリカラー（既存）           |
| ステータス: 再現成功 | `--color-success`     | 緑（既存のステータスバッジと統一） |
| ステータス: 定着     | `--color-success`     | 緑（濃い緑は将来的に検討）         |
| ステータス: 完了     | `--color-success`     | 緑（既存のステータスバッジと統一） |
| ステータス: 習慣化   | `--color-success`     | 緑（濃い緑は将来的に検討）         |
| 区切り線             | `--color-gray-300`    | グレー（既存の区切り線と統一）     |

### 7.2 タイポグラフィ

| 用途           | サイズ | ウェイト | カラー             |
| :------------- | :----- | :------- | :----------------- |
| サマリーラベル | 14px   | 500      | `--color-gray-700` |
| 件数           | 14px   | 600      | `--color-gray-900` |
| ステータス概要 | 12px   | 400      | `--color-gray-600` |

### 7.3 スペーシング

| 用途                           | 値       |
| :----------------------------- | :------- |
| サマリーセクションのパディング | `1rem`   |
| サマリー項目間の余白           | `0.5rem` |
| ステータス概要内のアイテム間   | `0.5rem` |

---

## 8. ワイヤーフレーム

### 8.1 日報カード（拡張後）

```
┌─────────────────────────────────────┐
│ 📅 2025/12/10（火）  💚 📄          │
├─────────────────────────────────────┤
│ 💚 よかったこと: 2件                 │
│    ✓ 再現成功: 1件  ✓ 定着: 1件     │
│                                     │
│ 📄 改善点: 1件                       │
│    ✓ 完了: 1件                       │
│ ─────────────────────────────────── │
│ チーム会議で積極的に発言できた...    │
└─────────────────────────────────────┘
```

### 8.2 モバイル表示（縦方向）

```
┌──────────────────────────┐
│ 📅 2025/12/10（火）      │
│ 💚 📄                    │
├──────────────────────────┤
│ 💚 よかったこと: 2件     │
│    ✓ 再現成功: 1件       │
│    ✓ 定着: 1件           │
│                          │
│ 📄 改善点: 1件            │
│    ✓ 完了: 1件            │
│ ──────────────────────── │
│ チーム会議で積極的に...  │
└──────────────────────────┘
```

### 8.3 ステータス概要が0件の場合

```
┌─────────────────────────────────────┐
│ 📅 2025/12/10（火）  💚 📄          │
├─────────────────────────────────────┤
│ 💚 よかったこと: 2件                 │
│ 📄 改善点: 1件                       │
│ ─────────────────────────────────── │
│ チーム会議で積極的に発言できた...    │
└─────────────────────────────────────┘
```

**注意**: ステータス概要が0件の場合は、件数のみ表示する。

---

## 9. 状態別表示

### 9.1 正常系

| 状態                     | 表示内容                                       |
| :----------------------- | :--------------------------------------------- |
| よかったこと・改善点あり | 件数とステータス概要を表示                     |
| よかったこと・改善点0件  | サマリーセクションを非表示（既存の動作を維持） |
| ステータス概要0件        | 件数のみ表示、ステータス概要は非表示           |
| ステータス概要1件以上    | 件数とステータス概要を表示                     |

### 9.2 エラー系

| 状態               | 表示内容                                    |
| :----------------- | :------------------------------------------ |
| データ取得エラー   | 既存の情報のみ表示（エラー時は現状維持）    |
| サマリーデータなし | 件数を0件として表示、ステータス概要は非表示 |

---

## 10. アクセシビリティ

### 10.1 セマンティックHTML

- サマリーセクションは `<section>` 要素で囲む
- よかったこと・改善点のラベルは適切な見出しレベルを使用

### 10.2 ARIA属性

- サマリーセクションに `aria-label` を追加（例: "よかったことのサマリー"）
- ステータス概要に `aria-label` を追加（例: "再現成功1件、定着1件"）

### 10.3 キーボード操作

- サマリー情報はクリック不可のため、キーボード操作は不要
- カード全体のクリック動作は既存の動作を維持

---

## 11. パフォーマンス考慮事項

### 11.1 レンダリング最適化

- サマリー情報はサーバー側で計算済みのため、フロントエンドでの計算は不要
- 条件付きレンダリング（`@if`）を使用して、不要な要素をレンダリングしない

### 11.2 データ量の最小化

- ステータス概要には、PRDで指定された「再現成功・定着」「完了・習慣化」のみを含める
- その他のステータスはカウントしない

---

## 12. 実装チェックリスト

- [ ] `report-card.component.html`: サマリーセクションの追加
- [ ] `report-card.component.ts`: サマリーデータの表示ロジック追加
- [ ] `report-card.component.scss`: サマリーセクションのスタイル追加
- [ ] モバイル/PCでの表示確認
- [ ] ステータス概要が0件の場合の表示確認
- [ ] アクセシビリティの確認（ARIA属性、セマンティックHTML）
- [ ] コンポーネントテストの追加
- [ ] Storybookストーリーの追加（各状態のストーリー）

---

## 13. 関連ドキュメント

- PRD: `docs/features/daily-report-list-item-details/prd.md`
- Tech Spec: `docs/features/daily-report-list-item-details/tech_spec.md`
- 日報一覧機能: `docs/features/daily-report-list/ui_design.md`
- デザインシステムルール: `.cursor/rules/design_system_rules.mdc`（実体はStorybook: `apps/web/src/stories/`）
- フォローアップ管理機能: `docs/features/followup-management/ui_design.md`

---

## 14. 既存コンポーネントの使用計画（詳細）

### 14.1 使用する既存コンポーネント

#### Icon コンポーネント

- **配置先**: `apps/web/src/app/shared/components/icon/`
- **使用方法**:
  - よかったことアイコン: `<app-icon name="heart" [size]="16" color="var(--color-primary-500)" />`
  - 改善点アイコン: `<app-icon name="file-text" [size]="16" color="var(--color-primary-500)" />`
  - チェックマークアイコン: `<app-icon name="check" [size]="12" color="var(--color-success)" />`

#### 標準HTML要素

- **Text**: `<span>` 要素で件数とステータス概要を表示
- **Section**: `<section>` 要素でサマリーセクションを囲む

### 14.2 新規コンポーネントの必要性

**新規コンポーネントは不要**: 既存の `report-card` コンポーネントを拡張する。

**拡張内容**:

- `report-card.component.html`: サマリーセクションを追加
- `report-card.component.ts`: サマリーデータの表示ロジックを追加（getterメソッドで計算）
- `report-card.component.scss`: サマリーセクションのスタイルを追加

**Storybookストーリー**: 既存の `report-card.stories.ts` を拡張し、サマリー情報を含むストーリーを追加する。

---

_本UI Designは Approved ステータスです。PdMレビュー完了。_
