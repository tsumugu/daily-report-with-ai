# 目標階層管理機能 デザインリサーチ

**バージョン**: v1  
**作成日**: 2025-12-13  
**作成者**: Des  
**ステータス**: Approved

---

## 1. 概要

目標階層管理機能のUI/UX設計について、一般的なUI/UXパターン・類似サービスのデザイン事例・ベストプラクティスを調査し、デザイン方針を検討する。

---

## 2. 要件の整理

### 2.1 主要要件

1. **目標の階層構造定義・管理**
   - 目標を階層的に定義・管理（2階層〜4階層程度）
   - 目標間の関係性（因果関係、依存関係）を明確に可視化
   - 目標の期間設定は柔軟に対応（半期、四半期、1ヶ月、1週間など）

2. **目標のCRUD操作**
   - 目標の作成・編集・削除
   - 下位目標の作成（上位目標から）
   - 目標の階層構造の一覧表示

3. **週次フォーカスとの接続**
   - 短期目標から週次フォーカスを設定可能
   - 週次フォーカスカードに紐づく短期目標を表示

---

## 3. 一般的なUI/UXパターン

### 3.1 階層構造の可視化パターン

#### パターン1: ツリービュー（Tree View）

**特徴**:

- 階層構造をツリー形式で表示
- 展開・折りたたみ機能
- インデントで階層の深さを表現

**メリット**:

- 階層構造が直感的に理解できる
- 深い階層でも見やすい
- 一般的なパターンでユーザーに馴染みがある

**デメリット**:

- 階層が深い場合、横スクロールが必要になる可能性がある

**参考事例**:

- Notion（ページ階層）
- Google Drive（フォルダ階層）
- GitHub（ディレクトリ階層）

#### パターン2: カード型階層表示

**特徴**:

- 各目標をカード形式で表示
- 親子関係を線や矢印で表現
- 階層ごとに色分けやインデントで表現

**メリット**:

- 各目標の情報を詳細に表示できる
- 視覚的に分かりやすい

**デメリット**:

- 階層が深い場合、画面が複雑になる

**参考事例**:

- Trello（カード階層）
- Asana（タスク階層）

#### パターン3: リスト型階層表示

**特徴**:

- リスト形式で階層を表示
- インデントで階層の深さを表現
- 展開・折りたたみ機能

**メリット**:

- シンプルで見やすい
- 実装が容易

**デメリット**:

- 階層が深い場合、インデントが多くなり見づらくなる

**参考事例**:

- Windows Explorer（フォルダ階層）
- macOS Finder（フォルダ階層）

**結論**: Phase 1では**パターン1（ツリービュー）**を採用。階層構造が直感的に理解でき、展開・折りたたみ機能で深い階層にも対応可能。

### 3.2 目標作成・編集フォームのパターン

#### パターン1: モーダル形式

**特徴**:

- モーダルダイアログで目標作成・編集フォームを表示
- 背景を暗くしてフォーカスを集める

**メリット**:

- 画面遷移が不要
- コンテキストを保ったまま操作できる

**デメリット**:

- モバイルでは画面が狭くなる

**参考事例**:

- Notion（ページ作成）
- Trello（カード作成）

#### パターン2: フルページ形式

**特徴**:

- 専用のページで目標作成・編集フォームを表示
- 画面全体を使用してフォームを配置

**メリット**:

- フォームに集中できる
- モバイルでも見やすい

**デメリット**:

- 画面遷移が必要
- コンテキストが切り替わる

**参考事例**:

- Google Forms（フォーム作成）
- Typeform（フォーム作成）

**結論**: Phase 1では**パターン2（フルページ形式）**を採用。目標作成・編集は複数のフィールドがあるため、フルページ形式の方が見やすく、モバイルでも使いやすい。

### 3.3 目標一覧表示のパターン

#### パターン1: カード型一覧

**特徴**:

- 各目標をカード形式で表示
- カード内に目標の基本情報を表示

**メリット**:

- 各目標の情報を詳細に表示できる
- 視覚的に分かりやすい

**デメリット**:

- 目標数が増えるとスクロールが長くなる

**参考事例**:

- Trello（カード一覧）
- Asana（タスク一覧）

#### パターン2: リスト型一覧

**特徴**:

- リスト形式で目標を表示
- コンパクトに表示できる

**メリット**:

- 多くの目標を一度に表示できる
- スクロールが少ない

**デメリット**:

- 各目標の情報が限定的

**参考事例**:

- Google Tasks（タスク一覧）
- Todoist（タスク一覧）

**結論**: Phase 1では**パターン1（カード型一覧）**を採用。目標の基本情報（目標名、期間、階層等）を視覚的に分かりやすく表示できる。

---

## 4. 類似サービスのデザイン事例

### 4.1 Notion（ページ階層）

**特徴**:

- サイドバーにページ階層をツリー形式で表示
- 展開・折りたたみ機能
- ドラッグ&ドロップで階層を変更可能

**参考ポイント**:

- 階層構造の可視化方法
- 展開・折りたたみのUI

### 4.2 Trello（カード階層）

**特徴**:

- カード型で階層を表示
- 親子関係を視覚的に表現
- カード内に詳細情報を表示

**参考ポイント**:

- カード型のデザイン
- 階層の視覚的表現

### 4.3 Asana（タスク階層）

**特徴**:

- リスト形式で階層を表示
- インデントで階層の深さを表現
- 展開・折りたたみ機能

**参考ポイント**:

- リスト型のデザイン
- 階層のインデント表現

### 4.4 OKR管理ツール（例: Weekdone, Perdoo）

**特徴**:

- 目標を階層的に表示
- 目標間の関係性を可視化
- 進捗状況を表示

**参考ポイント**:

- 目標階層の可視化方法
- 目標間の関係性の表現

---

## 5. ベストプラクティス

### 5.1 階層構造の可視化

- **インデント**: 階層の深さを視覚的に表現
- **展開・折りたたみ**: 深い階層でも見やすくする
- **視覚的な区切り**: 階層ごとに色分けや線で区切る
- **階層の深さ表示**: 現在の階層レベルを表示

### 5.2 フォーム設計

- **必須項目の明示**: 必須項目に `*` を表示
- **バリデーション**: リアルタイムでバリデーションエラーを表示
- **プレースホルダー**: 入力例をプレースホルダーで表示
- **文字数カウンター**: 最大文字数の場合は文字数カウンターを表示

### 5.3 エラーハンドリング

- **エラーメッセージ**: 明確で分かりやすいエラーメッセージ
- **エラー表示位置**: エラーが発生したフィールドの近くに表示
- **エラー状態の視覚化**: エラーフィールドを視覚的に強調

### 5.4 アクセシビリティ

- **キーボード操作**: すべての操作をキーボードで実行可能
- **スクリーンリーダー対応**: 適切なaria-labelを設定
- **フォーカス状態**: フォーカス状態を視覚的に明確に表示

---

## 6. デザイン方針の決定

### 6.1 階層構造の可視化

**採用パターン**: ツリービュー（Tree View）

**理由**:

- 階層構造が直感的に理解できる
- 展開・折りたたみ機能で深い階層にも対応可能
- 一般的なパターンでユーザーに馴染みがある

**実装方針**:

- インデントで階層の深さを表現
- 展開・折りたたみアイコンで階層を制御
- 階層ごとに色分け（オプション）

### 6.2 目標作成・編集フォーム

**採用パターン**: フルページ形式

**理由**:

- 目標作成・編集は複数のフィールドがあるため、フルページ形式の方が見やすい
- モバイルでも使いやすい

**実装方針**:

- フォームを中央寄せで配置
- 最大幅を制限して見やすくする
- モバイルでは全幅で表示

### 6.3 目標一覧表示

**採用パターン**: カード型一覧

**理由**:

- 目標の基本情報（目標名、期間、階層等）を視覚的に分かりやすく表示できる
- カード型は既存のデザインシステムと整合性がある

**実装方針**:

- 各目標をカード形式で表示
- カード内に目標の基本情報を表示
- カードをクリックで目標詳細に遷移

### 6.4 配色・レイアウト

**配色**:

- 既存のデザインシステム（Shadow-CN / Tailwind CSS）を活用
- 階層ごとに色分け（オプション、Phase 1では実装しない）

**レイアウト**:

- モバイルファースト設計
- レスポンシブ対応
- 既存のグリッドシステムを活用

---

## 7. 既存コンポーネントの活用計画

### 7.1 使用可能な既存コンポーネント

| コンポーネント | 用途                                       | 備考                     |
| :------------- | :----------------------------------------- | :----------------------- |
| Button         | 保存ボタン、キャンセルボタン、削除ボタン等 | 既存コンポーネントを活用 |
| InputField     | 目標名入力                                 | 既存コンポーネントを活用 |
| TextareaField  | 目標の説明、達成基準入力                   | 既存コンポーネントを活用 |
| DateField      | 開始日・終了日入力                         | 既存コンポーネントを活用 |
| FormCard       | フォームセクションのカード                 | 既存コンポーネントを活用 |
| Card           | 目標一覧のカード表示                       | 既存コンポーネントを活用 |
| AlertBanner    | エラーメッセージ表示                       | 既存コンポーネントを活用 |
| Toast          | 成功メッセージ表示                         | 既存コンポーネントを活用 |

### 7.2 新規コンポーネントが必要な項目

| コンポーネント  | 用途             | 理由                                                                         |
| :-------------- | :--------------- | :--------------------------------------------------------------------------- |
| GoalTreeView    | 階層構造の可視化 | 階層構造をツリー形式で表示する専用コンポーネントが必要                       |
| GoalCard        | 目標カード       | 目標の基本情報を表示する専用カードコンポーネント（既存Cardの拡張または新規） |
| GoalSelectField | 上位目標選択     | 上位目標を選択するドロップダウン（既存Selectの拡張または新規）               |

**判断根拠**:

- GoalTreeView: 階層構造の可視化は専用のコンポーネントが必要
- GoalCard: 目標の基本情報（目標名、期間、階層等）を表示する専用カードが必要
- GoalSelectField: 上位目標を選択するドロップダウンが必要（既存Selectの拡張を検討）

---

## 8. 参考資料

- 既存機能: `docs/features/weekly-focus-management/ui_design.md`（週次フォーカス管理機能）
- 既存機能: `docs/features/daily-report-input/ui_design.md`（日報入力機能）
- デザインシステムルール: `.cursor/rules/design_system_rules.mdc`（実体はStorybook: `apps/web/src/stories/`）
- PRD: `docs/features/goal-hierarchy-management/prd.md`
- Tech Spec: `docs/features/goal-hierarchy-management/tech_spec.md`

---

_本デザインリサーチは Approved ステータスです。ui_design.md 作成の参考として使用します。_
