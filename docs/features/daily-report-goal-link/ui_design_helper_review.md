# UI Design Helperレビュー

**機能名**: 日報と目標の関連付け機能
**レビュー日**: 2025-12-16
**レビュアー**: Helper
**ステータス**: Approved（改善提案あり）

---

## 1. レビュー観点

### 1.1 エッジケース・境界値の検討

#### ✅ 良好な点

- 最大選択数（10個）を超えた場合のエラーハンドリングが定義されている
- 関連日報がない場合の空状態が定義されている
- 「やったこと」が3行以上の場合の省略表示が定義されている

#### ⚠️ 改善提案

**提案1: 目標チップが長い場合の表示**

- **問題**: 目標名が非常に長い場合（例: 50文字以上）、チップの表示が崩れる可能性がある
- **提案**:
  - 目標名が長い場合は、一定文字数（例: 20文字）で省略し「...」を表示する
  - ホバー時にツールチップで全文を表示する

**提案2: 日報一覧で多数の目標が関連付けられている場合**

- **問題**: 「+N」の表示が、ユーザーにとって分かりにくい可能性がある
- **提案**:
  - 「+N」をクリックすると、残りの目標がポップオーバーで表示される
  - または、「他N個」のようにテキストを追加する

**提案3: 目標選択フィールドで目標が大量にある場合**

- **問題**: 目標数が100個以上ある場合、ドロップダウンメニューのパフォーマンスが低下する可能性がある
- **提案**:
  - 検索機能を強化し、debounce（300ms）を実装する
  - または、最大表示件数を設定し、スクロールで追加読み込みする（仮想スクロール）

### 1.2 ユーザビリティの観点で不足している点はないか

#### ✅ 良好な点

- キーボード操作に対応している
- スクリーンリーダーに対応している
- 画面フローが明確に定義されている

#### ⚠️ 改善提案

**提案4: 目標選択フィールドの配置**

PdMレビューでも指摘されているが、以下の点を検討すべき：

- **問題**: 日報を書く際、ユーザーはまず「やったこと」を入力し、その後に関連する目標を選択する可能性がある
- **提案**:
  - 目標選択フィールドを「やったこと」フィールドの後に配置する
  - または、プロトタイプで両方のパターンを試し、ユーザーフィードバックを基に決定する

**提案5: 目標チップの視認性**

- **問題**: 目標チップの背景色（`--color-neutral-100`）が薄すぎて、視認性が低い可能性がある
- **提案**:
  - 背景色を少し濃くする（`--color-neutral-200`）
  - または、ボーダーを追加して目標チップを強調する

**提案6: 関連日報一覧の「もっと見る」ボタン**

- **問題**: 「もっと見る」ボタンをクリックするたびに10件ずつ追加読み込みするが、ユーザーが何件読み込んだかが分かりにくい
- **提案**:
  - 「もっと見る（残りN件）」のように、残り件数を表示する
  - または、「N件表示中 / 全M件」のように、表示件数と全件数を表示する

### 1.3 過去の実績や失敗事例から学ぶべき点

#### ✅ 良好な点

- BL-01（目標階層管理機能）のコンポーネント（EntitySelectField、HierarchyCard等）を参考にしている
- 既存のデザインシステムを活用している

#### ⚠️ 改善提案

**提案7: 目標選択フィールドのパフォーマンス**

- **背景**: BL-01のEntitySelectFieldでは、目標数が多い場合にパフォーマンスが低下する可能性がある
- **提案**:
  - 目標リストをキャッシュし、検索時はクライアント側でフィルタリングする
  - debounce（300ms）を実装し、検索APIの呼び出し回数を減らす
  - Tech Specで既に考慮されているが、UI Designでも明記することを推奨

**提案8: 目標チップのクリック領域**

- **背景**: 小さなチップコンポーネントは、タッチデバイスでタップしにくい可能性がある
- **提案**:
  - 目標チップのクリック領域を最小44px×44px（iOSガイドライン）に設定する
  - または、パディングを増やしてクリック領域を広げる

### 1.4 実装前に検討すべき事項

#### ⚠️ 検討事項

**検討1: 目標チップのデザイン一貫性**

- **問題**: 目標チップと既存のStatusBadgeのデザインが似ている場合、ユーザーが混乱する可能性がある
- **検討**:
  - 目標チップと StatusBadge のデザインを明確に区別する
  - 例: 目標チップはアイコン（目標マーク）を追加する

**検討2: 関連日報一覧の初期表示件数**

- **問題**: 初期表示件数（10件）が多すぎる or 少なすぎる可能性がある
- **検討**:
  - プロトタイプでユーザーフィードバックを基に決定する
  - または、ユーザーが設定で変更できるようにする（Phase 2以降）

**検討3: 目標選択フィールドの検索機能**

- **問題**: 検索時に、目標名のみで検索するか、説明文も含めて検索するか、明確でない
- **検討**:
  - 目標名のみで検索する（推奨、パフォーマンス重視）
  - または、目標名+説明文で検索する（検索精度重視）

---

## 2. 改善提案のまとめ

### 優先度: 高（Phase 1で対応推奨）

1. **目標チップが長い場合の省略表示**（提案1）
   - 一定文字数（20文字）で省略し「...」を表示
   - ホバー時にツールチップで全文を表示

2. **目標選択フィールドのパフォーマンス**（提案7）
   - debounce（300ms）を実装
   - Tech Specで既に考慮されているが、UI Designでも明記

3. **目標チップのクリック領域**（提案8）
   - クリック領域を最小44px×44px（iOSガイドライン）に設定

### 優先度: 中（Phase 1で検討推奨）

4. **「+N」の表示方法**（提案2）
   - プロトタイプで「+N」をクリックした際の挙動を決定する

5. **目標選択フィールドの配置**（提案4）
   - プロトタイプで両方のパターンを試し、ユーザビリティを確認

6. **目標チップの視認性**（提案5）
   - プロトタイプで背景色とボーダーを調整し、視認性を確認

7. **関連日報一覧の「もっと見る」ボタン**（提案6）
   - 残り件数または表示件数を表示

### 優先度: 低（Phase 2以降で検討）

8. **目標選択フィールドで目標が大量にある場合**（提案3）
   - 仮想スクロールの実装

9. **目標チップのデザイン一貫性**（検討1）
   - StatusBadge との区別

10. **関連日報一覧の初期表示件数**（検討2）
    - ユーザー設定で変更可能にする

---

## 3. 承認

上記の改善提案を UI Design に反映することを推奨します。特に優先度「高」の項目（提案1、提案7、提案8）は Phase 1 で対応すべきです。

その他の提案は、プロトタイプ作成時に検討し、ユーザーフィードバックを基に決定することを推奨します。

**ステータス**: Approved（改善提案を考慮後、実装可能）

---

_本レビューは、UI Design の横断的なレビューを実施したものです。_
