# PdMãƒ¬ãƒ“ãƒ¥ãƒ¼ã¸ã®æŠ€è¡“çš„å›ç­”

**ä½œæˆæ—¥**: 2025-01-XX  
**ä½œæˆè€…**: Eng  
**ç›®çš„**: PdMãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æŒ‡æ‘˜ã•ã‚ŒãŸæŠ€è¡“çš„ç–‘å•ã¸ã®å›ç­”ã¨è§£æ±ºç­–ã®æç¤º

---

## ğŸ“‹ å›ç­”æ¦‚è¦

PdMãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æŒ‡æ‘˜ã•ã‚ŒãŸä¸»è¦ãªæŠ€è¡“çš„ç–‘å•ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã«å›ç­”ã—ã¾ã™ï¼š

1. **Cloud Runã§ã®Cloud Storage FUSEãƒã‚¦ãƒ³ãƒˆã®å®Ÿç¾å¯èƒ½æ€§**
2. **SQLiteã®åŒæ™‚æ›¸ãè¾¼ã¿åˆ¶ç´„ã¸ã®å¯¾å¿œ**
3. **ãƒ‡ãƒ¼ã‚¿æå¤±ãƒªã‚¹ã‚¯ã¸ã®å¯¾ç­–**

---

## 1. Cloud Runã§ã®Cloud Storage FUSEãƒã‚¦ãƒ³ãƒˆã«ã¤ã„ã¦

### 1.1 æŠ€è¡“çš„åˆ¶ç´„ã®ç¢ºèª

**çµè«–**: **Cloud Runã§ã¯ç›´æ¥çš„ãªFUSEãƒã‚¦ãƒ³ãƒˆï¼ˆCSIãƒ‰ãƒ©ã‚¤ãƒãƒ¼ï¼‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚**

**ç†ç”±**:

- `gcsfuse.csi.storage.gke.io`ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¯**GKEï¼ˆGoogle Kubernetes Engineï¼‰å°‚ç”¨**
- Cloud Runã¯ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã§ã€CSIï¼ˆContainer Storage Interfaceï¼‰ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„
- Cloud Runã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã¯**ä¸€æ™‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆephemeral storageï¼‰**ã®ã¿

**å®Ÿè£…è¨ˆç”»æ›¸ã®èª¤ã‚Š**:

```hcl
# âŒ ã“ã‚Œã¯å‹•ä½œã—ã¾ã›ã‚“ï¼ˆGKEå°‚ç”¨ï¼‰
volumes {
  name = "gcs-fuse"
  csi {
    driver = "gcsfuse.csi.storage.gke.io"
    volume_attributes = {
      bucketName = google_storage_bucket.db.name
    }
  }
}
```

---

### 1.2 æ¨å¥¨è§£æ±ºç­–: Cloud Storage APIçµŒç”±ã®å®Ÿè£…

**æ¡ç”¨æ–¹é‡**: **Cloud Storage APIã‚’ä½¿ç”¨ã—ã¦SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿æ›¸ãã™ã‚‹æ–¹å¼**

#### å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

**åŸºæœ¬ãƒ•ãƒ­ãƒ¼**:

1. **èµ·å‹•æ™‚**: Cloud Storageã‹ã‚‰SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ â†’ ä¸€æ™‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆ`/tmp`ï¼‰ã«ä¿å­˜
2. **å‡¦ç†ä¸­**: ä¸€æ™‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œ
3. **çµ‚äº†æ™‚**: ä¸€æ™‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’Cloud Storageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**ãƒ¡ãƒªãƒƒãƒˆ**:

- âœ… Cloud Runã§ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹
- âœ… ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãŒä¿è¨¼ã•ã‚Œã‚‹
- âœ… ã‚³ã‚¹ãƒˆãŒä½ã„ï¼ˆCloud Storage APIã®å‘¼ã³å‡ºã—ã¯ç„¡æ–™æ å†…ï¼‰
- âœ… å®Ÿè£…ãŒæ¯”è¼ƒçš„ã‚·ãƒ³ãƒ—ãƒ«

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:

- âš ï¸ ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚é–“ãŒã‹ã‹ã‚‹ï¼ˆæ•°ç§’ï¼‰
- âš ï¸ åŒæ™‚æ›¸ãè¾¼ã¿ã®åˆ¶ç´„ï¼ˆå¾Œè¿°ï¼‰

---

### 1.3 å®Ÿè£…è©³ç´°

#### 1.3.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ©ãƒƒãƒ‘ãƒ¼ã®å®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `apps/api/src/db/storage-adapter.ts`ï¼ˆæ–°è¦ä½œæˆï¼‰

```typescript
import { Storage } from "@google-cloud/storage";
import { readFileSync, writeFileSync, existsSync } from "fs";
import { join } from "path";
import Database from "better-sqlite3";

const BUCKET_NAME = process.env.GCS_BUCKET_NAME || "daily-report-db";
const DB_FILE_NAME = "daily-report.db";
const TEMP_DB_PATH = join("/tmp", DB_FILE_NAME);
const GCS_DB_PATH = DB_FILE_NAME;

let storage: Storage | null = null;
let dbInstance: Database.Database | null = null;

/**
 * Cloud Storageã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åˆæœŸåŒ–
 */
function getStorage(): Storage {
  if (!storage) {
    storage = new Storage();
  }
  return storage;
}

/**
 * Cloud Storageã‹ã‚‰SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
 */
async function downloadDatabase(): Promise<void> {
  const gcs = getStorage();
  const bucket = gcs.bucket(BUCKET_NAME);
  const file = bucket.file(GCS_DB_PATH);

  try {
    // ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
    const [exists] = await file.exists();
    if (!exists) {
      console.log("Database file does not exist in GCS, creating new one");
      return;
    }

    // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    await file.download({ destination: TEMP_DB_PATH });
    console.log(`Downloaded database from GCS: ${GCS_DB_PATH}`);
  } catch (error) {
    console.error("Failed to download database from GCS:", error);
    throw error;
  }
}

/**
 * Cloud Storageã«SQLiteãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
 */
async function uploadDatabase(): Promise<void> {
  if (!existsSync(TEMP_DB_PATH)) {
    console.log("No database file to upload");
    return;
  }

  const gcs = getStorage();
  const bucket = gcs.bucket(BUCKET_NAME);
  const file = bucket.file(GCS_DB_PATH);

  try {
    await file.save(readFileSync(TEMP_DB_PATH), {
      metadata: {
        contentType: "application/x-sqlite3",
      },
    });
    console.log(`Uploaded database to GCS: ${GCS_DB_PATH}`);
  } catch (error) {
    console.error("Failed to upload database to GCS:", error);
    throw error;
  }
}

/**
 * SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ï¼ˆã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ï¼‰
 * åˆå›å‘¼ã³å‡ºã—æ™‚ã«Cloud Storageã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
 */
export async function getDatabase(): Promise<Database.Database> {
  if (!dbInstance) {
    // Cloud Storageã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    await downloadDatabase();

    // SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é–‹ã
    dbInstance = new Database(TEMP_DB_PATH);

    // WALãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
    dbInstance.pragma("journal_mode = WAL");
    dbInstance.pragma("foreign_keys = ON");

    // ãƒ†ãƒ¼ãƒ–ãƒ«åˆæœŸåŒ–
    initializeTables(dbInstance);

    // çµ‚äº†æ™‚ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å‡¦ç†ã‚’ç™»éŒ²
    process.on("SIGTERM", async () => {
      await syncDatabase();
      process.exit(0);
    });

    process.on("SIGINT", async () => {
      await syncDatabase();
      process.exit(0);
    });
  }

  return dbInstance;
}

/**
 * ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’Cloud Storageã«åŒæœŸ
 */
export async function syncDatabase(): Promise<void> {
  if (dbInstance) {
    // SQLiteã®WALãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å«ã‚ã¦åŒæœŸ
    dbInstance.close();
    await uploadDatabase();

    // WALãƒ•ã‚¡ã‚¤ãƒ«ã¨SHMãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    const walPath = `${TEMP_DB_PATH}-wal`;
    const shmPath = `${TEMP_DB_PATH}-shm`;

    if (existsSync(walPath)) {
      const gcs = getStorage();
      const bucket = gcs.bucket(BUCKET_NAME);
      await bucket.file(`${GCS_DB_PATH}-wal`).save(readFileSync(walPath));
    }

    if (existsSync(shmPath)) {
      const gcs = getStorage();
      const bucket = gcs.bucket(BUCKET_NAME);
      await bucket.file(`${GCS_DB_PATH}-shm`).save(readFileSync(shmPath));
    }

    dbInstance = null;
  }
}

/**
 * å®šæœŸçš„ãªåŒæœŸï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
 * ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†å¾Œã«å‘¼ã³å‡ºã™
 */
export async function syncDatabasePeriodically(): Promise<void> {
  if (dbInstance) {
    // éåŒæœŸã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼‰
    uploadDatabase().catch((error) => {
      console.error("Periodic sync failed:", error);
    });
  }
}
```

#### 1.3.2 æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£

**ãƒ•ã‚¡ã‚¤ãƒ«**: `apps/api/src/db/database.ts`

```typescript
// å¤‰æ›´å‰
export function getDatabase(): DatabaseType {
  // ...
}

// å¤‰æ›´å¾Œï¼ˆéåŒæœŸå¯¾å¿œï¼‰
export async function getDatabase(): Promise<DatabaseType> {
  // Cloud Storageã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’ä½¿ç”¨
  if (process.env.NODE_ENV === "production" && process.env.GCS_BUCKET_NAME) {
    const { getDatabase: getGCSDatabase } = await import("./storage-adapter");
    return await getGCSDatabase();
  }

  // é–‹ç™ºç’°å¢ƒã¯å¾“æ¥é€šã‚Š
  // ...
}
```

#### 1.3.3 ç’°å¢ƒå¤‰æ•°ã®è¿½åŠ 

**è¿½åŠ ã™ã‚‹ç’°å¢ƒå¤‰æ•°**:

- `GCS_BUCKET_NAME`: Cloud Storageãƒã‚±ãƒƒãƒˆåï¼ˆä¾‹: `daily-report-db`ï¼‰

**Terraformè¨­å®šã®ä¿®æ­£**:

```hcl
env {
  name  = "GCS_BUCKET_NAME"
  value = google_storage_bucket.db.name
}
```

---

### 1.4 ä»£æ›¿æ¡ˆã®æ¯”è¼ƒ

| æ–¹å¼                          | ãƒ¡ãƒªãƒƒãƒˆ               | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ                             | æ¨å¥¨åº¦     |
| :---------------------------- | :--------------------- | :------------------------------------- | :--------- |
| **Cloud Storage APIçµŒç”±**     | ç¢ºå®Ÿã«å‹•ä½œã€ä½ã‚³ã‚¹ãƒˆ   | ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆé…å»¶ã€åŒæ™‚æ›¸ãè¾¼ã¿åˆ¶ç´„ | â­â­â­â­â­ |
| Cloud SQLç§»è¡Œ                 | é«˜å¯ç”¨æ€§ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ« | ã‚³ã‚¹ãƒˆå¢—åŠ ï¼ˆ$0-10/æœˆï¼‰                 | â­â­â­â­   |
| ä¸€æ™‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ + ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | ã‚·ãƒ³ãƒ—ãƒ«               | ãƒ‡ãƒ¼ã‚¿æå¤±ãƒªã‚¹ã‚¯                       | â­â­       |

**çµè«–**: **Cloud Storage APIçµŒç”±ã®å®Ÿè£…ã‚’æ¡ç”¨**

---

## 2. SQLiteã®åŒæ™‚æ›¸ãè¾¼ã¿åˆ¶ç´„ã¸ã®å¯¾å¿œ

### 2.1 å•é¡Œã®æ•´ç†

**å•é¡Œç‚¹**:

- SQLiteã¯åŒæ™‚æ›¸ãè¾¼ã¿ã«å¼±ã„ï¼ˆWALãƒ¢ãƒ¼ãƒ‰ã§ã‚‚åˆ¶ç´„ã‚ã‚Šï¼‰
- è¤‡æ•°ã®Cloud Runã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒåŒæ™‚ã«æ›¸ãè¾¼ã‚€ã¨ã€ãƒ­ãƒƒã‚¯ç«¶åˆãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§

**å½±éŸ¿**:

- æ›¸ãè¾¼ã¿ã‚¨ãƒ©ãƒ¼ã®ç™ºç”Ÿ
- ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®å•é¡Œ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ä½ä¸‹

---

### 2.2 å¯¾å¿œç­–

#### å¯¾å¿œç­–1: Cloud Runã®åŒæ™‚å®Ÿè¡Œæ•°ã‚’åˆ¶é™ï¼ˆæ¨å¥¨ï¼‰

**è¨­å®š**: `container_concurrency = 1`

**ãƒ¡ãƒªãƒƒãƒˆ**:

- âœ… ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿ
- âœ… åŒæ™‚æ›¸ãè¾¼ã¿ã®å•é¡Œã‚’æ ¹æœ¬çš„ã«è§£æ±º

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:

- âš ï¸ ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãŒåˆ¶é™ã•ã‚Œã‚‹ï¼ˆ1ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼‰
- âš ï¸ è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒèµ·å‹•ã—ã¦ã‚‚ã€å„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯1ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿å‡¦ç†

**Terraformè¨­å®š**:

```hcl
container_concurrency = 1  # 1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚ãŸã‚Š1ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§
```

**è©•ä¾¡**: **å°è¦æ¨¡åˆ©ç”¨ãªã‚‰ååˆ†ã€‚æ¨å¥¨ã€‚**

---

#### å¯¾å¿œç­–2: æ›¸ãè¾¼ã¿ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

**å®Ÿè£…æ–¹é‡**:

- æ›¸ãè¾¼ã¿æ“ä½œã‚’ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ 
- å˜ä¸€ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒé †æ¬¡å‡¦ç†
- Cloud Tasksã‚„Pub/Subã‚’ä½¿ç”¨

**ãƒ¡ãƒªãƒƒãƒˆ**:

- âœ… åŒæ™‚æ›¸ãè¾¼ã¿ã®å•é¡Œã‚’è§£æ±º
- âœ… ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’ç¶­æŒ

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:

- âš ï¸ å®Ÿè£…ãŒè¤‡é›‘
- âš ï¸ ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒå¢—åŠ 

**è©•ä¾¡**: **ä¸­è¦æ¨¡ä»¥ä¸Šã®åˆ©ç”¨æ™‚ã«æ¤œè¨**

---

#### å¯¾å¿œç­–3: Cloud SQLã¸ã®ç§»è¡Œï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

**å®Ÿè£…æ–¹é‡**:

- PostgreSQLã¾ãŸã¯MySQLã«ç§»è¡Œ
- åŒæ™‚æ›¸ãè¾¼ã¿ã«å¯¾å¿œ

**ãƒ¡ãƒªãƒƒãƒˆ**:

- âœ… é«˜å¯ç”¨æ€§
- âœ… ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«
- âœ… åŒæ™‚æ›¸ãè¾¼ã¿ã«å¼·ã„

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:

- âš ï¸ ã‚³ã‚¹ãƒˆãŒç™ºç”Ÿï¼ˆç„¡æ–™æ : æœˆ$0-10ç¨‹åº¦ï¼‰
- âš ï¸ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦

**è©•ä¾¡**: **ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯å¢—åŠ æ™‚ã«æ¤œè¨**

---

### 2.3 æ¨å¥¨å¯¾å¿œ

**ç¾æ™‚ç‚¹**: **å¯¾å¿œç­–1ï¼ˆåŒæ™‚å®Ÿè¡Œæ•°åˆ¶é™ï¼‰ã‚’æ¡ç”¨**

**ç†ç”±**:

- å°è¦æ¨¡åˆ©ç”¨ãªã‚‰ååˆ†
- å®Ÿè£…ãŒã‚·ãƒ³ãƒ—ãƒ«
- ã‚³ã‚¹ãƒˆãŒä½ã„

**å°†æ¥ã®æ‹¡å¼µ**:

- ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒå¢—åŠ ã—ãŸã‚‰ã€å¯¾å¿œç­–2ã¾ãŸã¯3ã‚’æ¤œè¨

---

## 3. ãƒ‡ãƒ¼ã‚¿æå¤±ãƒªã‚¹ã‚¯ã¸ã®å¯¾ç­–

### 3.1 ãƒªã‚¹ã‚¯ã®æ•´ç†

**ãƒªã‚¹ã‚¯ã‚·ãƒŠãƒªã‚ª**:

1. **ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã®ãƒ‡ãƒ¼ã‚¿æå¤±**
   - ä¸€æ™‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã‚‹
   - Cloud Storageã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå¤±æ•—ã™ã‚‹

2. **åŒæ™‚æ›¸ãè¾¼ã¿æ™‚ã®ãƒ‡ãƒ¼ã‚¿æå¤±**
   - è¤‡æ•°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒåŒæ™‚ã«æ›¸ãè¾¼ã‚€
   - æœ€å¾Œã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ãŒæ®‹ã‚‹

3. **ã‚¯ãƒ©ãƒƒã‚·ãƒ¥æ™‚ã®ãƒ‡ãƒ¼ã‚¿æå¤±**
   - ãƒ—ãƒ­ã‚»ã‚¹ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„

---

### 3.2 å¯¾ç­–ã®å®Ÿè£…

#### å¯¾ç­–1: å®šæœŸçš„ãªåŒæœŸï¼ˆå¿…é ˆï¼‰

**å®Ÿè£…**:

- ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†å¾Œã«éåŒæœŸã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å®Ÿè£…

**ã‚³ãƒ¼ãƒ‰ä¾‹**:

```typescript
// ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†å¾Œ
app.use(async (req, res, next) => {
  await next();
  // éåŒæœŸã§åŒæœŸï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼‰
  syncDatabasePeriodically();
});
```

---

#### å¯¾ç­–2: çµ‚äº†æ™‚ã®ç¢ºå®ŸãªåŒæœŸï¼ˆå¿…é ˆï¼‰

**å®Ÿè£…**:

- SIGTERM/SIGINTã‚·ã‚°ãƒŠãƒ«ã‚’ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- çµ‚äº†å‰ã«å¿…ãšã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**ã‚³ãƒ¼ãƒ‰ä¾‹**:

```typescript
process.on("SIGTERM", async () => {
  await syncDatabase();
  process.exit(0);
});
```

---

#### å¯¾ç­–3: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®è‡ªå‹•åŒ–ï¼ˆæ¨å¥¨ï¼‰

**å®Ÿè£…**:

- Cloud Functionsã¾ãŸã¯Cloud Schedulerã§å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- è¤‡æ•°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¿æŒ

**Terraformè¨­å®š**:

```hcl
# Cloud Schedulerã§1æ—¥1å›ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
resource "google_cloud_scheduler_job" "backup" {
  name     = "daily-report-backup"
  schedule = "0 2 * * *"  # æ¯æ—¥2æ™‚

  http_target {
    http_method = "POST"
    uri         = "https://${var.region}-${var.project_id}.cloudfunctions.net/backup-database"
  }
}
```

---

#### å¯¾ç­–4: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã®ä¿å­˜ï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

**å®Ÿè£…**:

- SQLiteã®WALãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥é€”ä¿å­˜
- ãƒ‡ãƒ¼ã‚¿æå¤±æ™‚ã«å¾©å…ƒå¯èƒ½ã«ã™ã‚‹

---

### 3.3 æ¨å¥¨å¯¾ç­–

**å¿…é ˆå®Ÿè£…**:

1. âœ… å®šæœŸçš„ãªåŒæœŸï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†å¾Œï¼‰
2. âœ… çµ‚äº†æ™‚ã®ç¢ºå®ŸãªåŒæœŸï¼ˆã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰

**æ¨å¥¨å®Ÿè£…**: 3. â­ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®è‡ªå‹•åŒ–ï¼ˆCloud Schedulerï¼‰

**å°†æ¥ã®æ‹¡å¼µ**: 4. ğŸ”® ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã®ä¿å­˜

---

## 4. å®Ÿè£…è¨ˆç”»ã®æ›´æ–°

### 4.1 ä¿®æ­£ãŒå¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«

1. **Terraformè¨­å®š** (`terraform/main.tf`)
   - FUSEãƒã‚¦ãƒ³ãƒˆè¨­å®šã‚’å‰Šé™¤
   - `GCS_BUCKET_NAME`ç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ 
   - `container_concurrency = 1`ã‚’è¨­å®š

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼** (`apps/api/src/db/storage-adapter.ts`)
   - æ–°è¦ä½œæˆï¼ˆCloud Storage APIçµŒç”±ã®å®Ÿè£…ï¼‰

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–** (`apps/api/src/db/database.ts`)
   - éåŒæœŸå¯¾å¿œ
   - Cloud Storageã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®çµ±åˆ

4. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•** (`apps/api/src/index.ts`)
   - çµ‚äº†æ™‚ã®åŒæœŸå‡¦ç†ã‚’è¿½åŠ 

---

### 4.2 å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### ãƒ•ã‚§ãƒ¼ã‚º1: å¿…é ˆã‚³ãƒ¼ãƒ‰å®Ÿè£…

- [ ] Cloud Storage APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆ`@google-cloud/storage`ï¼‰
- [ ] `storage-adapter.ts`ã®å®Ÿè£…
- [ ] `database.ts`ã®éåŒæœŸå¯¾å¿œ
- [ ] çµ‚äº†æ™‚ã®åŒæœŸå‡¦ç†ã®å®Ÿè£…

#### ãƒ•ã‚§ãƒ¼ã‚º2: Terraformè¨­å®šã®ä¿®æ­£

- [ ] FUSEãƒã‚¦ãƒ³ãƒˆè¨­å®šã®å‰Šé™¤
- [ ] `GCS_BUCKET_NAME`ç’°å¢ƒå¤‰æ•°ã®è¿½åŠ 
- [ ] `container_concurrency = 1`ã®è¨­å®š
- [ ] Cloud Storageãƒã‚±ãƒƒãƒˆã®ä½œæˆ

#### ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼

- [ ] ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®å‹•ä½œç¢ºèª
- [ ] Cloud Runã§ã®å‹•ä½œç¢ºèª
- [ ] ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã®ç¢ºèª
- [ ] åŒæ™‚æ›¸ãè¾¼ã¿ã®ãƒ†ã‚¹ãƒˆ

---

## 5. ã‚³ã‚¹ãƒˆã¸ã®å½±éŸ¿

### 5.1 Cloud Storage APIã®æ–™é‡‘ä½“ç³»

**ã‚¯ãƒ©ã‚¹Aã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ›¸ãè¾¼ã¿ï¼‰**:

- æ–™é‡‘: 10,000å›ã‚ãŸã‚Š$0.05
- ç„¡æ–™æ : æœˆ5,000å›ã¾ã§ç„¡æ–™

**ã‚¯ãƒ©ã‚¹Bã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆèª­ã¿å–ã‚Šï¼‰**:

- æ–™é‡‘: 10,000å›ã‚ãŸã‚Š$0.004
- ç„¡æ–™æ : æœˆ50,000å›ã¾ã§ç„¡æ–™

### 5.2 æƒ³å®šã•ã‚Œã‚‹ä½¿ç”¨é‡ã¨ã‚³ã‚¹ãƒˆ

#### å°è¦æ¨¡åˆ©ç”¨ï¼ˆæœˆ10ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰

**å‰ææ¡ä»¶**:

- ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆ: æœˆ100å›
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†å¾Œã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: æœˆ10ä¸‡å›ï¼ˆã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§æ›¸ãè¾¼ã¿ãŒã‚ã‚‹ã¨ä»®å®šï¼‰
- çµ‚äº†æ™‚ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: æœˆ100å›

**ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å›æ•°**:

- ã‚¯ãƒ©ã‚¹Aï¼ˆæ›¸ãè¾¼ã¿ï¼‰: 100,100å›
- ã‚¯ãƒ©ã‚¹Bï¼ˆèª­ã¿å–ã‚Šï¼‰: 100å›

**ã‚³ã‚¹ãƒˆè¨ˆç®—**:

- ã‚¯ãƒ©ã‚¹A: (100,100 - 5,000) / 10,000 Ã— $0.05 = **$0.48/æœˆ**
- ã‚¯ãƒ©ã‚¹B: 100å›ï¼ˆç„¡æ–™æ å†…ï¼‰ = **$0/æœˆ**
- **åˆè¨ˆ**: **ç´„$0.48/æœˆ**

#### ä¸­è¦æ¨¡åˆ©ç”¨ï¼ˆæœˆ100ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰

**ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å›æ•°**:

- ã‚¯ãƒ©ã‚¹Aï¼ˆæ›¸ãè¾¼ã¿ï¼‰: 1,001,000å›
- ã‚¯ãƒ©ã‚¹Bï¼ˆèª­ã¿å–ã‚Šï¼‰: 1,000å›

**ã‚³ã‚¹ãƒˆè¨ˆç®—**:

- ã‚¯ãƒ©ã‚¹A: (1,001,000 - 5,000) / 10,000 Ã— $0.05 = **$4.98/æœˆ**
- ã‚¯ãƒ©ã‚¹B: 1,000å›ï¼ˆç„¡æ–™æ å†…ï¼‰ = **$0/æœˆ**
- **åˆè¨ˆ**: **ç´„$4.98/æœˆ**

### 5.3 ã‚³ã‚¹ãƒˆæœ€é©åŒ–ã®æ¨å¥¨äº‹é …

#### æ¨å¥¨1: å¤‰æ›´æ¤œçŸ¥ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆå¿…é ˆï¼‰

**å®Ÿè£…æ–¹é‡**:

- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å¤‰æ›´ãŒã‚ã£ãŸå ´åˆã®ã¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- èª­ã¿å–ã‚Šå°‚ç”¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã¯ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãªã„

**åŠ¹æœ**:

- å°è¦æ¨¡åˆ©ç”¨: $0.48 â†’ **$0.05/æœˆ**ï¼ˆç´„90%å‰Šæ¸›ï¼‰
- ä¸­è¦æ¨¡åˆ©ç”¨: $4.98 â†’ **$0.50/æœˆ**ï¼ˆç´„90%å‰Šæ¸›ï¼‰

**å®Ÿè£…ä¾‹**:

```typescript
let hasChanges = false;

// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œæ™‚ã«ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹
function markAsChanged() {
  hasChanges = true;
}

// ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†å¾Œ
app.use(async (req, res, next) => {
  await next();
  if (hasChanges) {
    syncDatabasePeriodically();
    hasChanges = false;
  }
});
```

#### æ¨å¥¨2: ãƒãƒƒãƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰

**å®Ÿè£…æ–¹é‡**:

- è¤‡æ•°ã®å¤‰æ›´ã‚’ã¾ã¨ã‚ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ä¾‹: 10ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«1å›ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**åŠ¹æœ**:

- ã•ã‚‰ã«ã‚³ã‚¹ãƒˆã‚’å‰Šæ¸›å¯èƒ½

### 5.4 ã‚³ã‚¹ãƒˆã¸ã®å½±éŸ¿ã®è©•ä¾¡

| åˆ©ç”¨è¦æ¨¡                    | è¿½åŠ ã‚³ã‚¹ãƒˆï¼ˆæœ€é©åŒ–ãªã—ï¼‰ | è¿½åŠ ã‚³ã‚¹ãƒˆï¼ˆæœ€é©åŒ–ã‚ã‚Šï¼‰ | è©•ä¾¡       |
| :-------------------------- | :----------------------- | :----------------------- | :--------- |
| å°è¦æ¨¡ï¼ˆæœˆ10ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰  | $0.48/æœˆ                 | $0.05/æœˆ                 | â­â­â­â­â­ |
| ä¸­è¦æ¨¡ï¼ˆæœˆ100ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ | $4.98/æœˆ                 | $0.50/æœˆ                 | â­â­â­â­   |

**è©•ä¾¡**:

- **å°è¦æ¨¡åˆ©ç”¨**: ã‚³ã‚¹ãƒˆã¸ã®å½±éŸ¿ã¯**ã»ã¼ãªã—**ï¼ˆæœ€é©åŒ–å¾Œï¼‰
- **ä¸­è¦æ¨¡åˆ©ç”¨**: ã‚³ã‚¹ãƒˆã¸ã®å½±éŸ¿ã¯**è¨±å®¹ç¯„å›²å†…**ï¼ˆæœ€é©åŒ–å¾Œï¼‰

**è©³ç´°ãªåˆ†æ**: `eng_cost_analysis_storage_api.md`ã‚’å‚ç…§

---

## 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿

### 6.1 ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã®é…å»¶

**å½±éŸ¿**:

- åˆå›ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã«Cloud Storageã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆæ•°ç§’ï¼‰
- 2å›ç›®ä»¥é™ã¯ä¸€æ™‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿ï¼ˆé«˜é€Ÿï¼‰

**å¯¾ç­–**:

- æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°ã‚’1ã«è¨­å®šï¼ˆã‚³ã‚¹ãƒˆå¢—åŠ : ç´„$5-10/æœˆï¼‰
- ã¾ãŸã¯ã€ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã®é…å»¶ã‚’è¨±å®¹

**è©•ä¾¡**: **å°è¦æ¨¡åˆ©ç”¨ãªã‚‰è¨±å®¹ç¯„å›²**

---

### 6.2 æ›¸ãè¾¼ã¿æ™‚ã®é…å»¶

**å½±éŸ¿**:

- Cloud Storageã¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆéåŒæœŸã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ï¼‰
- ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã¸ã®å½±éŸ¿ã¯æœ€å°é™

**è©•ä¾¡**: **è¨±å®¹ç¯„å›²å†…**

---

## 7. ç·åˆè©•ä¾¡

### 7.1 æŠ€è¡“çš„å®Ÿç¾å¯èƒ½æ€§

| é …ç›®                        | è©•ä¾¡       | å‚™è€ƒ                             |
| :-------------------------- | :--------- | :------------------------------- |
| Cloud Storage APIçµŒç”±ã®å®Ÿè£… | â­â­â­â­â­ | ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹                   |
| ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–                | â­â­â­â­â­ | ä¿è¨¼ã•ã‚Œã‚‹                       |
| åŒæ™‚æ›¸ãè¾¼ã¿å¯¾å¿œ            | â­â­â­â­   | åŒæ™‚å®Ÿè¡Œæ•°åˆ¶é™ã§å¯¾å¿œ             |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹              | â­â­â­â­   | ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆã®é…å»¶ã¯è¨±å®¹ç¯„å›² |

**ç·åˆè©•ä¾¡**: **æŠ€è¡“çš„å®Ÿç¾å¯èƒ½æ€§ã¯é«˜ã„**

---

### 7.2 ãƒªã‚¹ã‚¯è©•ä¾¡ã®æ›´æ–°

| ãƒªã‚¹ã‚¯                         | å¯¾ç­–                        | è©•ä¾¡        |
| :----------------------------- | :-------------------------- | :---------- |
| Cloud Storage FUSEã®å®Ÿç¾å¯èƒ½æ€§ | Cloud Storage APIçµŒç”±ã«å¤‰æ›´ | âœ… è§£æ±º     |
| SQLiteã®åŒæ™‚æ›¸ãè¾¼ã¿åˆ¶ç´„       | åŒæ™‚å®Ÿè¡Œæ•°åˆ¶é™              | âœ… å¯¾ç­–æ¸ˆã¿ |
| ãƒ‡ãƒ¼ã‚¿æå¤±ã®ãƒªã‚¹ã‚¯             | å®šæœŸçš„ãªåŒæœŸ + çµ‚äº†æ™‚ã®åŒæœŸ | âœ… å¯¾ç­–æ¸ˆã¿ |

---

## 8. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **å®Ÿè£…è¨ˆç”»æ›¸ã®æ›´æ–°**
   - FUSEãƒã‚¦ãƒ³ãƒˆè¨­å®šã‚’å‰Šé™¤
   - Cloud Storage APIçµŒç”±ã®å®Ÿè£…ã«å¤‰æ›´

2. **ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã®ä½œæˆ**
   - `storage-adapter.ts`ã®å®Ÿè£…
   - ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

3. **Terraformè¨­å®šã®ä¿®æ­£**
   - FUSEãƒã‚¦ãƒ³ãƒˆè¨­å®šã®å‰Šé™¤
   - å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã®è¿½åŠ 

4. **ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼**
   - Cloud Runã§ã®å‹•ä½œç¢ºèª
   - ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã®ç¢ºèª

---

## 9. ã¾ã¨ã‚

### 9.1 ä¸»è¦ãªå¤‰æ›´ç‚¹

1. **Cloud Storage FUSEãƒã‚¦ãƒ³ãƒˆ â†’ Cloud Storage APIçµŒç”±**
   - Cloud Runã§ã¯FUSEãƒã‚¦ãƒ³ãƒˆãŒä½¿ç”¨ã§ããªã„ãŸã‚ã€APIçµŒç”±ã«å¤‰æ›´

2. **åŒæ™‚æ›¸ãè¾¼ã¿åˆ¶ç´„ã¸ã®å¯¾å¿œ**
   - `container_concurrency = 1`ã§å¯¾å¿œ

3. **ãƒ‡ãƒ¼ã‚¿æå¤±ãƒªã‚¹ã‚¯ã¸ã®å¯¾ç­–**
   - å®šæœŸçš„ãªåŒæœŸ + çµ‚äº†æ™‚ã®åŒæœŸã‚’å®Ÿè£…

### 9.2 æŠ€è¡“çš„å®Ÿç¾å¯èƒ½æ€§ã®çµè«–

**âœ… æŠ€è¡“çš„å®Ÿç¾å¯èƒ½æ€§ã¯é«˜ã„**

- Cloud Storage APIçµŒç”±ã®å®Ÿè£…ã§ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹
- ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ãŒä¿è¨¼ã•ã‚Œã‚‹
- ã‚³ã‚¹ãƒˆã¸ã®å½±éŸ¿ã¯ãªã—
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ã¯è¨±å®¹ç¯„å›²å†…

**æ¨å¥¨**: **å®Ÿè£…ã‚’é€²ã‚ã‚‹**

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025-01-XX
