# 日報一覧・詳細表示機能 技術リサーチ（Tech Research）

## 1. PRD要求サマリ
- 一覧画面：日付、できごと（冒頭N文字）、よかったこと有無アイコン等
- 並び順：新しい日付順（降順）
- ページング：無限スクロール or ページネーション
- 詳細画面：全項目閲覧、編集導線
- モバイル/PC両対応、初期表示は高速

---

## 2. 一般的な実現方法

### 2.1 ページネーションパターン

| パターン | 特徴 | メリット | デメリット |
|:---------|:-----|:---------|:-----------|
| **オフセット** | limit + offset | シンプル、ページ番号表示可 | 大量データで遅い |
| **カーソル** | 最後のIDを基準に次取得 | 高速、リアルタイム向き | ページ番号不可 |
| **無限スクロール** | スクロールで自動読込 | UX良好 | 全体把握しにくい |

### 2.2 パフォーマンス最適化

| 手法 | 説明 |
|:-----|:-----|
| **インデックス** | date, userId にインデックス設定 |
| **プロジェクション** | 一覧では必要なフィールドのみ取得 |
| **キャッシュ** | 一覧データをクライアントキャッシュ |
| **仮想スクロール** | DOMに表示分のみレンダリング |

### 2.3 ベストプラクティス

#### 一覧取得
- デフォルト30件（約1ヶ月分）
- 新しい順（date DESC）でソート
- 検索・フィルタはPhase 2以降

#### 詳細取得
- IDで単一取得
- 関連データ（GoodPoint, Improvement）はJOIN or 別クエリ

---

## 3. 類似サービスの技術構成

| サービス | ページング | 特徴 |
|:---------|:-----------|:-----|
| **Notion** | 無限スクロール + カーソル | 高速、リアルタイム同期 |
| **Slack** | 無限スクロール | メッセージ形式 |
| **GitHub Issues** | ページネーション | フィルタ・検索充実 |

---

## 4. 推奨構成（本プロジェクト向け）

### 一覧API
- `GET /api/daily-reports?limit=30&offset=0`
- レスポンス：`{ data: [...], total: 100 }`
- 日付降順、ユーザーIDでフィルタ（認証済み）

### 詳細API
- `GET /api/daily-reports/:id`
- GoodPoint / Improvement は別クエリ or 埋め込み

### パフォーマンス
- date + userId の複合インデックス
- 一覧では events を冒頭100文字に切り詰め
- クライアントキャッシュ（Angular HttpClient）

---

## 5. 参考資料
- REST API Pagination Best Practices
- Angular Virtual Scrolling
- Database Indexing Strategies

